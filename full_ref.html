<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Full Package Reference &mdash; GerryChain  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Contributing to GerryChain" href="topics/contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #0099cd" >
            <a href="index.html" class="icon icon-home"> GerryChain
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/intro.html">Overview of the Chain</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/quickstart.html">Getting started with GerryChain</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/recom.html">Running a chain with ReCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/partitions.html">Working with Partitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/updaters.html">Updaters</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/data.html">Good Data Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/geometries.html">Working With Geometries</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="topics/reproducibility.html">Reproducibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/tools.html">Evaluating districting plans in the real world</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/contributing.html">Contributing to GerryChain</a></li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Full Package Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#accept">Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chain">Chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grid">Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metagraph">Metagraph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tree">Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constraints">Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graph">Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meta">Meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#partition">Partition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proposals">Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updaters">Updaters</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #0099cd" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GerryChain</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Full Package Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/full_ref.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="full-package-reference">
<h1>Full Package Reference<a class="headerlink" href="#full-package-reference" title="Permalink to this headline">¶</a></h1>
<p>This page contains the full reference for the <code class="docutils literal notranslate"><span class="pre">gerrychain</span></code> package, and
is included primarily for the sake of developers trying to hunt down errors
or understand the codebase. For a more user-friendly introduction to the
usage of the package, please see the <a class="reference internal" href="api.html#api-reference"><span class="std std-ref">API Reference</span></a>.</p>
<div class="section" id="accept">
<h2>Accept<a class="headerlink" href="#accept" title="Permalink to this headline">¶</a></h2>
<p>This module provides the main acceptance function used in ReCom Markov chains.</p>
<p>Dependencies:</p>
<ul class="simple">
<li><p>random: For random number generation for probabilistic acceptance.</p></li>
</ul>
<p>Last Updated: 11 Jan 2024</p>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.accept.</code><code class="sig-name descname">always_accept</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/accept.html#always_accept"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.accept.</code><code class="sig-name descname">cut_edge_accept</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/accept.html#cut_edge_accept"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Always accepts the flip if the number of cut_edges increases.
Otherwise, uses the Metropolis criterion to decide.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to accept a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if accepted, False to remain in place</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="chain">
<h2>Chain<a class="headerlink" href="#chain" title="Permalink to this headline">¶</a></h2>
<p>This module provides the MarkovChain class, which is designed to facilitate the creation
and iteration of Markov chains in the context of political redistricting and gerrymandering
analysis. It allows for the exploration of different districting plans based on specified
constraints and acceptance criteria.</p>
<p>Key Components:</p>
<ul class="simple">
<li><p>MarkovChain: The main class used for creating and iterating over Markov chain states.</p></li>
<li><p>Validator: A helper class for validating proposed states in the Markov chain. See
<a class="reference internal" href="api.html#gerrychain.constraints.Validator" title="gerrychain.constraints.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Validator</span></code></a> for more details.</p></li>
</ul>
<p>Usage:
The primary use of this module is to create an instance of MarkovChain with appropriate
parameters like proposal function, constraints, acceptance function, and initial state,
and then to iterate through the states of the Markov chain, yielding a new proposal
at each step.</p>
<p>Dependencies:</p>
<ul class="simple">
<li><p>typing: Used for type hints.</p></li>
</ul>
<p>Last Updated: 11 Jan 2024</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.chain.</code><code class="sig-name descname">MarkovChain</code><span class="sig-paren">(</span><em class="sig-param">proposal: Callable, constraints: Union[Iterable[Callable], gerrychain.constraints.validity.Validator, Iterable[gerrychain.constraints.bounds.Bounds], Callable], accept: Callable, initial_state: Optional[gerrychain.partition.partition.Partition], total_steps: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/chain.html#MarkovChain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>MarkovChain is a class that creates an iterator for iterating over the states
of a Markov chain run in a gerrymandering analysis context.</p>
<p>It allows for the generation of a sequence of partitions (states) of a political
districting plan, where each partition represents a possible state in the Markov chain.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
    <span class="c1"># Do whatever you want - print output, compute scores, ...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proposal</strong> (<em>Callable</em>) – Function proposing the next state from the current state.</p></li>
<li><p><strong>constraints</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>Callable</em><em>]</em><em>, </em><a class="reference internal" href="api.html#gerrychain.constraints.Validator" title="gerrychain.constraints.Validator"><em>Validator</em></a><em>, </em><em>Iterable</em><em>[</em><a class="reference internal" href="api.html#gerrychain.constraints.Bounds" title="gerrychain.constraints.Bounds"><em>Bounds</em></a><em>]</em><em>, </em><em>Callable</em><em>]</em>) – A function with signature <code class="docutils literal notranslate"><span class="pre">Partition</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code> determining whether
the proposed next state is valid (passes all binary constraints). Usually
this is a <a class="reference internal" href="api.html#gerrychain.constraints.Validator" title="gerrychain.constraints.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Validator</span></code></a> class instance.</p></li>
<li><p><strong>accept</strong> (<em>Callable</em>) – Function accepting or rejecting the proposed state. In the most basic
use case, this always returns <code class="docutils literal notranslate"><span class="pre">True</span></code>. But if the user wanted to use a
Metropolis-Hastings acceptance rule, this is where you would implement it.</p></li>
<li><p><strong>initial_state</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a><em>]</em>) – Initial <a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">gerrychain.partition.Partition</span></code></a> class.</p></li>
<li><p><strong>total_steps</strong> (<em>int</em>) – Number of steps to run.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the initial_state is not valid according to the constraints.</p>
</dd>
</dl>
<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">constraints</code></dt>
<dd><p>Read_only alias for the is_valid property.
Returns the constraints of the Markov chain.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The constraints of the Markov chain.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>String</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">with_progress_bar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/chain.html#MarkovChain.with_progress_bar"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Wraps the Markov chain in a tqdm progress bar.</p>
<p>Useful for long-running Markov chains where you want to keep track
of the progress. Requires the <cite>tqdm</cite> package to be installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tqdm-wrapped Markov chain.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid">
<h2>Grid<a class="headerlink" href="#grid" title="Permalink to this headline">¶</a></h2>
<p>This module provides a Grid class used for creating and manipulating grid partitions.
It’s part of the GerryChain suite, designed to facilitate experiments with redistricting
plans without the need for extensive data processing. This module relies on NetworkX for
graph operations and integrates with GerryChain’s Partition class.</p>
<p>Dependencies:</p>
<ul class="simple">
<li><p>math: For math.floor() function.</p></li>
<li><dl class="simple">
<dt>networkx: For graph operations with using the graph structure in</dt><dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>.</p>
</dd>
</dl>
</li>
<li><p>typing: Used for type hints.</p></li>
</ul>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">Grid</code><span class="sig-paren">(</span><em class="sig-param">dimensions: Optional[Tuple[int, int]] = None, with_diagonals: bool = False, assignment: Optional[Dict] = None, updaters: Optional[Dict[str, Callable]] = None, parent: Optional[Grid] = None, flips: Optional[Dict[Tuple[int, int], int]] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/grid.html#Grid"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gerrychain.partition.partition.Partition</span></code></p>
<p>The <a class="reference internal" href="api.html#gerrychain.grid.Grid" title="gerrychain.grid.Grid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grid</span></code></a> class represents a grid partitioned into districts.
It is useful for running little experiments with GerryChain without needing to do
any data processing or cleaning to get started.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>The nodes of <code class="docutils literal notranslate"><span class="pre">grid.graph</span></code> are labelled by tuples <code class="docutils literal notranslate"><span class="pre">(i,j)</span></code>, for <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">i</span> <span class="pre">&lt;=</span> <span class="pre">10</span></code>
and <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">j</span> <span class="pre">&lt;=</span> <span class="pre">10</span></code>. Each node has an <code class="docutils literal notranslate"><span class="pre">area</span></code> of 1 and each edge has <code class="docutils literal notranslate"><span class="pre">shared_perim</span></code> 1.</p>
<p>If the updaters are not specified, the default updaters are used, which are as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default_updaters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;cut_edges&quot;</span><span class="p">:</span> <span class="n">cut_edges</span><span class="p">,</span>
    <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="n">Tally</span><span class="p">(</span><span class="s2">&quot;population&quot;</span><span class="p">),</span>
    <span class="s2">&quot;perimeter&quot;</span><span class="p">:</span> <span class="n">perimeter</span><span class="p">,</span>
    <span class="s2">&quot;exterior_boundaries&quot;</span><span class="p">:</span> <span class="n">exterior_boundaries</span><span class="p">,</span>
    <span class="s2">&quot;interior_boundaries&quot;</span><span class="p">:</span> <span class="n">interior_boundaries</span><span class="p">,</span>
    <span class="s2">&quot;boundary_nodes&quot;</span><span class="p">:</span> <span class="n">boundary_nodes</span><span class="p">,</span>
    <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="n">Tally</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;area&quot;</span><span class="p">),</span>
    <span class="s2">&quot;polsby_popper&quot;</span><span class="p">:</span> <span class="n">polsby_popper</span><span class="p">,</span>
    <span class="s2">&quot;cut_edges_by_part&quot;</span><span class="p">:</span> <span class="n">cut_edges_by_part</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimensions</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – The grid dimensions (rows, columns), defaults to None.</p></li>
<li><p><strong>with_diagonals</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, includes diagonal connections, defaults to False.</p></li>
<li><p><strong>assignment</strong> (<em>Dict</em><em>, </em><em>optional</em>) – Node-to-district assignments, defaults to None.</p></li>
<li><p><strong>updaters</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Callable</em><em>]</em><em>, </em><em>optional</em>) – Custom updater functions, defaults to None.</p></li>
<li><p><strong>parent</strong> (<a class="reference internal" href="api.html#gerrychain.grid.Grid" title="gerrychain.grid.Grid"><em>Grid</em></a><em>, </em><em>optional</em>) – Parent Grid object for inheritance, defaults to None.</p></li>
<li><p><strong>flips</strong> (<em>Dict</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Node flips for partition changes, defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>Exception</strong> – If neither dimensions nor parent is provided.</p>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">as_list_of_lists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/grid.html#Grid.as_list_of_lists"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the grid as a list of lists (like a matrix), where the (i,j)th
entry is the assigned district of the node in position (i,j) on the
grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of lists representing the grid.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">assignment</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">default_updaters</code><em class="property"> = {'area': &lt;gerrychain.updaters.tally.Tally object&gt;, 'boundary_nodes': &lt;function boundary_nodes&gt;, 'cut_edges': &lt;function cut_edges&gt;, 'cut_edges_by_part': &lt;function cut_edges_by_part&gt;, 'exterior_boundaries': &lt;function exterior_boundaries&gt;, 'interior_boundaries': &lt;function interior_boundaries&gt;, 'perimeter': &lt;function perimeter&gt;, 'polsby_popper': &lt;function polsby_popper&gt;, 'population': &lt;gerrychain.updaters.tally.Tally object&gt;}</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">edge_flows</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">flips</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">flows</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">graph</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">parent</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">subgraphs</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">updaters</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">color_half</code><span class="sig-paren">(</span><em class="sig-param">node: Tuple[int, int], threshold: int</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/grid.html#color_half"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Assigns a color (as an integer) to a node based on its x-coordinate.</p>
<p>This function is used to partition the grid into two parts based on a given threshold.
Nodes with an x-coordinate less than or equal to the threshold are assigned one color,
and nodes with an x-coordinate greater than the threshold are assigned another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – The node to color, represented as a tuple of coordinates (x, y).</p></li>
<li><p><strong>threshold</strong> (<em>int</em>) – The x-coordinate value that determines the color assignment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An integer representing the color of the node. Returns 0 for nodes with
x-coordinate less than or equal to the threshold, and 1 otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">color_quadrants</code><span class="sig-paren">(</span><em class="sig-param">node: Tuple[int, int], thresholds: Tuple[int, int]</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/grid.html#color_quadrants"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Assigns a color (as an integer) to a node based on its position relative to
specified threshold coordinates, effectively dividing the grid into four quadrants.</p>
<p>The function uses two threshold values (one for each axis) to determine the color.
Each combination of being higher or lower than the threshold on each axis results
in a different color.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – The node to color, represented as a tuple of coordinates (x, y).</p></li>
<li><p><strong>thresholds</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – A tuple of two integers representing the threshold coordinates
(x_threshold, y_threshold).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An integer representing the color of the node, determined by its quadrant.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">create_grid_graph</code><span class="sig-paren">(</span><em class="sig-param">dimensions: Tuple[int, int], with_diagonals: bool</em><span class="sig-paren">)</span> &#x2192; gerrychain.graph.graph.Graph<a class="reference internal" href="_modules/gerrychain/grid.html#create_grid_graph"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Creates a grid graph with the specified dimensions.
Optionally includes diagonal connections between nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimensions</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – The grid dimensions (rows, columns).</p></li>
<li><p><strong>with_diagonals</strong> (<em>bool</em>) – If True, includes diagonal connections.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A grid graph.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph">Graph</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the dimensions are not a tuple of length 2.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">get_boundary_perim</code><span class="sig-paren">(</span><em class="sig-param">node: Tuple[int, int], dimensions: Tuple[int, int]</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/grid.html#get_boundary_perim"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Determines the boundary perimeter of a node on the grid.
The boundary perimeter is the number of sides of the node that
are on the boundary of the grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – The node to check.</p></li>
<li><p><strong>dimensions</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – The dimensions of the grid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The boundary perimeter of the node.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">give_constant_attribute</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph</em>, <em class="sig-param">attribute: Any</em>, <em class="sig-param">value: Any</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/grid.html#give_constant_attribute"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Sets the specified attribute to the specified value for all nodes in the graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><em>Graph</em></a>) – The graph to modify.</p></li>
<li><p><strong>attribute</strong> (<em>Any</em>) – The attribute to set.</p></li>
<li><p><strong>value</strong> (<em>Any</em>) – The value to set the attribute to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">tag_boundary_nodes</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph, dimensions: Tuple[int, int]</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/grid.html#tag_boundary_nodes"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Adds the boolean attribute <code class="docutils literal notranslate"><span class="pre">boundary_node</span></code> to each node in the graph.
If the node is on the boundary of the grid, that node also gets the attribute
<code class="docutils literal notranslate"><span class="pre">boundary_perim</span></code> which is determined by the function <code class="xref py py-func docutils literal notranslate"><span class="pre">get_boundary_perim()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><em>Graph</em></a>) – The graph to modify.</p></li>
<li><p><strong>dimensions</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – The dimensions of the grid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="metagraph">
<h2>Metagraph<a class="headerlink" href="#metagraph" title="Permalink to this headline">¶</a></h2>
<p>This module provides the main tools for interacting with the metagraph of partitions.
The metagraph of partitions is the set of partitions that are reachable from the
current partition by a single flip.</p>
<p>Dependencies:</p>
<ul class="simple">
<li><p>itertools: Used for product() function.</p></li>
<li><p>typing: Used for type hints.</p></li>
</ul>
<p>Last Updated: 11 Jan 2024</p>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metagraph.</code><code class="sig-name descname">all_cut_edge_flips</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; Iterator[Dict]<a class="reference internal" href="_modules/gerrychain/metagraph.html#all_cut_edge_flips"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Generate all possible flips of cut edges in a partition
without any constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The partition object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterator that yields dictionaries representing the flipped edges.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metagraph.</code><code class="sig-name descname">all_valid_flips</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition, constraints: Union[Iterable[Callable], Callable]</em><span class="sig-paren">)</span> &#x2192; Iterator[Dict]<a class="reference internal" href="_modules/gerrychain/metagraph.html#all_valid_flips"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Generate all valid flips for a given partition subject
to the prescribed constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The initial partition.</p></li>
<li><p><strong>constraints</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>Callable</em><em>]</em><em>, </em><em>Callable</em><em>]</em>) – The constraints to be satisfied. Can be a single
constraint or an iterable of constraints.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterator that yields dictionaries representing valid flips.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metagraph.</code><code class="sig-name descname">all_valid_states_one_flip_away</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition, constraints: Union[Iterable[Callable], Callable]</em><span class="sig-paren">)</span> &#x2192; Iterator[gerrychain.partition.partition.Partition]<a class="reference internal" href="_modules/gerrychain/metagraph.html#all_valid_states_one_flip_away"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Generates all valid Partitions that differ from the given partition
by one flip. These are the given partition’s neighbors in the metagraph
of partitions. (The metagraph of partitions is the set of partitions
that is reachable from the given partition by a single flip under the
prescribed constraints.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The initial partition.</p></li>
<li><p><strong>constraints</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>Callable</em><em>]</em><em>, </em><em>Callable</em><em>]</em>) – Constraints to determine the validity of a partition.
It can be a single callable or an iterable of callables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterator that yields all valid partitions that differ from the
given partition by one flip.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metagraph.</code><code class="sig-name descname">metagraph_degree</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition, constraints: Union[Iterable[Callable], Callable]</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/metagraph.html#metagraph_degree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Calculate the degree of the node in the metagraph of the given partition.
That is to say, compute how many possible valid states are reachable from
the state given by partition in a single flip subject to the prescribed
constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The partition object representing the current state.</p></li>
<li><p><strong>constraints</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>Callable</em><em>]</em><em>, </em><em>Callable</em><em>]</em>) – The constraints to be applied to the partition.
It can be a single constraint or an iterable of constraints.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The degree of the partition node in the metagraph.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="tree">
<h2>Tree<a class="headerlink" href="#tree" title="Permalink to this headline">¶</a></h2>
<p>This module provides tools and algorithms for manipulating and analyzing graphs,
particularly focused on partitioning graphs based on population data. It leverages the
NetworkX library to handle graph structures and implements various algorithms for graph
partitioning and tree traversal.</p>
<p>Key functionalities include:</p>
<ul class="simple">
<li><p>Predecessor and successor functions for graph traversal using breadth-first search.</p></li>
<li><p>Implementation of random and uniform spanning trees for graph partitioning.</p></li>
<li><p>The <cite>PopulatedGraph</cite> class, which represents a graph with additional population data,
and methods for assessing and modifying this data.</p></li>
<li><p>Functions for finding balanced edge cuts in a populated graph, either through
contraction or memoization techniques.</p></li>
<li><p>A suite of functions (<cite>bipartition_tree</cite>, <cite>recursive_tree_part</cite>, <cite>get_seed_chunks</cite>, etc.)
for partitioning graphs into balanced subsets based on population targets and tolerances.</p></li>
<li><p>Utility functions like <cite>get_max_prime_factor_less_than</cite> and <cite>recursive_seed_part_inner</cite>
to assist in complex partitioning tasks.</p></li>
</ul>
<p>Dependencies:</p>
<ul class="simple">
<li><p>networkx: Used for graph data structure and algorithms.</p></li>
<li><p>random: Provides random number generation for probabilistic approaches.</p></li>
<li><p>typing: Used for type hints.</p></li>
</ul>
<p>Last Updated: 30 Jan 2024</p>
<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">BalanceError</code><a class="reference internal" href="_modules/gerrychain/tree.html#BalanceError"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when a balanced cut cannot be found.</p>
</dd></dl>

<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">BipartitionWarning</code><a class="reference internal" href="_modules/gerrychain/tree.html#BipartitionWarning"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></p>
<p>Generally raised when it is proving difficult to find a balanced cut.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">Cut</code></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>Represents a cut in a graph.</p>
<p>Create new instance of Cut(edge, weight, subset)</p>
<dl class="attribute">
<dt>
<code class="sig-name descname">edge</code></dt>
<dd><p>The edge where the cut is made. Defaults to None.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">subset</code></dt>
<dd><p>The (frozen) subset of nodes on one side of the cut. Defaults to None.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">weight</code></dt>
<dd><p>The weight assigned to the edge (if any). Defaults to None.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">PopulatedGraph</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, populations: Dict, ideal_pop: Union[float, int], epsilon: float</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#PopulatedGraph"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing a graph with population information.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The underlying graph structure.</p></li>
<li><p><strong>subsets</strong> – A dictionary mapping nodes to their subsets.</p></li>
<li><p><strong>population</strong> – A dictionary mapping nodes to their populations.</p></li>
<li><p><strong>tot_pop</strong> – The total population of the graph.</p></li>
<li><p><strong>ideal_pop</strong> – The ideal population for each district.</p></li>
<li><p><strong>epsilon</strong> – The tolerance for population deviation from the ideal population within each
district.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The underlying graph structure.</p></li>
<li><p><strong>populations</strong> (<em>Dict</em>) – A dictionary mapping nodes to their populations.</p></li>
<li><p><strong>ideal_pop</strong> (<em>Union</em><em>[</em><em>float</em><em>, </em><em>int</em><em>]</em>) – The ideal population for each district.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The tolerance for population deviation as a percentage of
the ideal population within each district.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">contract_node</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">parent</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/tree.html#PopulatedGraph.contract_node"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">degree</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/tree.html#PopulatedGraph.degree"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">has_ideal_population</code><span class="sig-paren">(</span><em class="sig-param">node</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/tree.html#PopulatedGraph.has_ideal_population"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">ReselectException</code><a class="reference internal" href="_modules/gerrychain/tree.html#ReselectException"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when the tree-splitting algorithm is unable to find a
balanced cut after some maximum number of attempts, but the
user has allowed the algorithm to reselect the pair of
districts from parent graph to try and recombine.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">bipartition_tree</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, pop_col: str, pop_target: Union[int, float], epsilon: float, node_repeats: int = 1, spanning_tree: Optional[networkx.classes.graph.Graph] = None, spanning_tree_fn: Callable = &lt;function random_spanning_tree&gt;, region_surcharge: Optional[Dict] = None, balance_edge_fn: Callable = &lt;function find_balanced_edge_cuts_memoization&gt;, choice: Callable = &lt;bound method Random.choice of &lt;random.Random object&gt;&gt;, max_attempts: Optional[int] = 100000, warn_attempts: int = 1000, allow_pair_reselection: bool = False, cut_choice: Callable = &lt;function _region_preferred_max_weight_choice&gt;</em><span class="sig-paren">)</span> &#x2192; Set<a class="reference internal" href="_modules/gerrychain/tree.html#bipartition_tree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This function finds a balanced 2 partition of a graph by drawing a
spanning tree and finding an edge to cut that leaves at most an epsilon
imbalance between the populations of the parts. If a root fails, new roots
are tried until node_repeats in which case a new tree is drawn.</p>
<p>Builds up a connected subgraph with a connected complement whose population
is <code class="docutils literal notranslate"><span class="pre">epsilon</span> <span class="pre">*</span> <span class="pre">pop_target</span></code> away from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The graph to partition.</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – The node attribute holding the population of each node.</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em>) – The target population for the returned subset of nodes.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The allowable deviation from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> (as a percentage of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) for the subgraph’s population.</p></li>
<li><p><strong>node_repeats</strong> (<em>int</em><em>, </em><em>optional</em>) – A parameter for the algorithm: how many different choices
of root to use before drawing a new spanning tree. Defaults to 1.</p></li>
<li><p><strong>spanning_tree</strong> (<em>Optional</em><em>[</em><em>nx.Graph</em><em>]</em><em>, </em><em>optional</em>) – The spanning tree for the algorithm to use (used when the
algorithm chooses a new root and for testing).</p></li>
<li><p><strong>spanning_tree_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The random spanning tree algorithm to use if a spanning
tree is not provided. Defaults to <a class="reference internal" href="api.html#gerrychain.tree.random_spanning_tree" title="gerrychain.tree.random_spanning_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">random_spanning_tree()</span></code></a>.</p></li>
<li><p><strong>region_surcharge</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) – A dictionary of surcharges for the spanning tree algorithm.
Defaults to None.</p></li>
<li><p><strong>balance_edge_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The function to find balanced edge cuts. Defaults to
<a class="reference internal" href="api.html#gerrychain.tree.find_balanced_edge_cuts_memoization" title="gerrychain.tree.find_balanced_edge_cuts_memoization"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_balanced_edge_cuts_memoization()</span></code></a>.</p></li>
<li><p><strong>choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The function to make a random choice of root node for the population
tree. Passed to <code class="docutils literal notranslate"><span class="pre">balance_edge_fn</span></code>. Can be substituted for testing.
Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">random.random()</span></code>.</p></li>
<li><p><strong>max_attempts</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – The maximum number of attempts that should be made to bipartition.
Defaults to 10000.</p></li>
<li><p><strong>warn_attempts</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of attempts after which a warning is issued if a balanced
cut cannot be found. Defaults to 1000.</p></li>
<li><p><strong>allow_pair_reselection</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether we would like to return an error to the calling
function to ask it to reselect the pair of nodes to try and recombine. Defaults to False.</p></li>
<li><p><strong>cut_choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The function used to select the cut edge from the list of possible
balanced cuts. Defaults to <code class="xref py py-meth docutils literal notranslate"><span class="pre">_region_preferred_max_weight_choice()</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A subset of nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code> (whose induced subgraph is connected). The other
part of the partition is the complement of this subset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="api.html#gerrychain.tree.BipartitionWarning" title="gerrychain.tree.BipartitionWarning"><strong>BipartitionWarning</strong></a> – If a possible cut cannot be found after 1000 attempts.</p></li>
<li><p><strong>RuntimeError</strong> – If a possible cut cannot be found after the maximum number of attempts
given by <code class="docutils literal notranslate"><span class="pre">max_attempts</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">bipartition_tree_random</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, pop_col: str, pop_target: Union[int, float], epsilon: float, node_repeats: int = 1, repeat_until_valid: bool = True, spanning_tree: Optional[networkx.classes.graph.Graph] = None, spanning_tree_fn: Callable = &lt;function random_spanning_tree&gt;, balance_edge_fn: Callable = &lt;function find_balanced_edge_cuts_memoization&gt;, choice: Callable = &lt;bound method Random.choice of &lt;random.Random object&gt;&gt;, max_attempts: Optional[int] = 100000</em><span class="sig-paren">)</span> &#x2192; Optional[Set[Any]]<a class="reference internal" href="_modules/gerrychain/tree.html#bipartition_tree_random"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This is like <a class="reference internal" href="api.html#gerrychain.tree.bipartition_tree" title="gerrychain.tree.bipartition_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></a> except it chooses a random balanced
cut, rather than the first cut it finds.</p>
<p>This function finds a balanced 2 partition of a graph by drawing a
spanning tree and finding an edge to cut that leaves at most an epsilon
imbalance between the populations of the parts. If a root fails, new roots
are tried until node_repeats in which case a new tree is drawn.</p>
<p>Builds up a connected subgraph with a connected complement whose population
is <code class="docutils literal notranslate"><span class="pre">epsilon</span> <span class="pre">*</span> <span class="pre">pop_target</span></code> away from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The graph to partition</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – The node attribute holding the population of each node</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em>) – The target population for the returned subset of nodes</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The allowable deviation from  <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> (as a percentage of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) for the subgraph’s population</p></li>
<li><p><strong>node_repeats</strong> (<em>int</em>) – A parameter for the algorithm: how many different choices
of root to use before drawing a new spanning tree. Defaults to 1.</p></li>
<li><p><strong>repeat_until_valid</strong> (<em>bool</em><em>, </em><em>optional</em>) – Determines whether to keep drawing spanning trees
until a tree with a balanced cut is found. If <cite>True</cite>, a set of nodes will
always be returned; if <cite>False</cite>, <cite>None</cite> will be returned if a valid spanning
tree is not found on the first try. Defaults to True.</p></li>
<li><p><strong>spanning_tree</strong> (<em>Optional</em><em>[</em><em>nx.Graph</em><em>]</em><em>, </em><em>optional</em>) – The spanning tree for the algorithm to use (used when the
algorithm chooses a new root and for testing). Defaults to None.</p></li>
<li><p><strong>spanning_tree_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The random spanning tree algorithm to use if a spanning
tree is not provided. Defaults to <a class="reference internal" href="api.html#gerrychain.tree.random_spanning_tree" title="gerrychain.tree.random_spanning_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">random_spanning_tree()</span></code></a>.</p></li>
<li><p><strong>balance_edge_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The algorithm used to find balanced cut edges. Defaults to
<a class="reference internal" href="api.html#gerrychain.tree.find_balanced_edge_cuts_memoization" title="gerrychain.tree.find_balanced_edge_cuts_memoization"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_balanced_edge_cuts_memoization()</span></code></a>.</p></li>
<li><p><strong>choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The random choice function. Can be substituted for testing. Defaults
to <code class="xref py py-func docutils literal notranslate"><span class="pre">random.choice()</span></code>.</p></li>
<li><p><strong>max_attempts</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – The max number of attempts that should be made to bipartition.
Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A subset of nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code> (whose induced subgraph is connected) or None if a
valid spanning tree is not found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Set[Any], None]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">find_balanced_edge_cuts_contraction</code><span class="sig-paren">(</span><em class="sig-param">h: gerrychain.tree.PopulatedGraph</em>, <em class="sig-param">choice: Callable = &lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em><span class="sig-paren">)</span> &#x2192; List[gerrychain.tree.Cut]<a class="reference internal" href="_modules/gerrychain/tree.html#find_balanced_edge_cuts_contraction"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Find balanced edge cuts using contraction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h</strong> (<a class="reference internal" href="api.html#gerrychain.tree.PopulatedGraph" title="gerrychain.tree.PopulatedGraph"><em>PopulatedGraph</em></a>) – The populated graph.</p></li>
<li><p><strong>choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The function used to make random choices.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of balanced edge cuts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="api.html#gerrychain.tree.Cut" title="gerrychain.tree.Cut">Cut</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">find_balanced_edge_cuts_memoization</code><span class="sig-paren">(</span><em class="sig-param">h: gerrychain.tree.PopulatedGraph</em>, <em class="sig-param">choice: Callable = &lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em><span class="sig-paren">)</span> &#x2192; List[gerrychain.tree.Cut]<a class="reference internal" href="_modules/gerrychain/tree.html#find_balanced_edge_cuts_memoization"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Find balanced edge cuts using memoization.</p>
<p>This function takes a PopulatedGraph object and a choice function as input and returns a list
of balanced edge cuts. A balanced edge cut is defined as a cut that divides the graph into
two subsets, such that the population of each subset is close to the ideal population
defined by the PopulatedGraph object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h</strong> (<a class="reference internal" href="api.html#gerrychain.tree.PopulatedGraph" title="gerrychain.tree.PopulatedGraph"><em>PopulatedGraph</em></a>) – The PopulatedGraph object representing the graph.</p></li>
<li><p><strong>choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The choice function used to select the root node.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of balanced edge cuts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="api.html#gerrychain.tree.Cut" title="gerrychain.tree.Cut">Cut</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">get_max_prime_factor_less_than</code><span class="sig-paren">(</span><em class="sig-param">n: int</em>, <em class="sig-param">ceil: int</em><span class="sig-paren">)</span> &#x2192; Optional[int]<a class="reference internal" href="_modules/gerrychain/tree.html#get_max_prime_factor_less_than"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="simple">
<dt>Helper function for recursive_seed_part_inner. Returns the largest prime factor of <code class="docutils literal notranslate"><span class="pre">n</span></code></dt><dd><p>less than <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, or None if all are greater than ceil.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<em>int</em>) – The number to find the largest prime factor for.</p></li>
<li><p><strong>ceil</strong> (<em>int</em>) – The upper limit for the largest prime factor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The largest prime factor of <code class="docutils literal notranslate"><span class="pre">n</span></code> less than <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, or None if all are greater
than ceil.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">get_seed_chunks</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, num_chunks: int, num_dists: int, pop_target: Union[int, float], pop_col: str, epsilon: float, node_repeats: int = 1, method: Callable = functools.partial(&lt;function bipartition_tree_random&gt;, max_attempts=10000)</em><span class="sig-paren">)</span> &#x2192; List[List[int]]<a class="reference internal" href="_modules/gerrychain/tree.html#get_seed_chunks"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper function for recursive_seed_part. Partitions the graph into <code class="docutils literal notranslate"><span class="pre">num_chunks</span></code> chunks,
balanced within new_epsilon &lt;= <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> of a balanced target population.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The graph</p></li>
<li><p><strong>num_chunks</strong> (<em>int</em>) – The number of chunks to partition the graph into</p></li>
<li><p><strong>num_dists</strong> (<em>int</em>) – The number of districts</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em>) – The target population of the districts (not of the chunks)</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>node_repeats</strong> (<em>int</em><em>, </em><em>optional</em>) – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree_random()</span></code>
to use. Defaults to 1.</p></li>
<li><p><strong>method</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The method to use for bipartitioning the graph.
Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree_random()</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">predecessors</code><span class="sig-paren">(</span><em class="sig-param">h: networkx.classes.graph.Graph</em>, <em class="sig-param">root: Any</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/tree.html#predecessors"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">random_spanning_tree</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph</em>, <em class="sig-param">region_surcharge: Optional[Dict] = None</em><span class="sig-paren">)</span> &#x2192; networkx.classes.graph.Graph<a class="reference internal" href="_modules/gerrychain/tree.html#random_spanning_tree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Builds a spanning tree chosen by Kruskal’s method using random weights.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The input graph to build the spanning tree from. Should be a Networkx Graph.</p></li>
<li><p><strong>region_surcharge</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) – Dictionary of surcharges to add to the random
weights used in region-aware variants.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The maximal spanning tree represented as a Networkx Graph.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nx.Graph</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">recursive_seed_part</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, parts: Sequence, pop_target: Union[float, int], pop_col: str, epsilon: float, method: Callable = functools.partial(&lt;function bipartition_tree&gt;, max_attempts=10000), node_repeats: int = 1, n: Optional[int] = None, ceil: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/tree.html#recursive_seed_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns a partition with <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> districts balanced within <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code> by recursively splitting graph using recursive_seed_part_inner.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The graph</p></li>
<li><p><strong>parts</strong> (<em>Sequence</em>) – Iterable of part labels (like <code class="docutils literal notranslate"><span class="pre">[0,1,2]</span></code> or <code class="docutils literal notranslate"><span class="pre">range(4)</span></code></p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>float</em><em>, </em><em>int</em><em>]</em>) – Target population for each part of the partition</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>method</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function used to find balanced partitions at the 2-district level
Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></p></li>
<li><p><strong>node_repeats</strong> (<em>int</em><em>, </em><em>optional</em>) – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.
Defaults to 1.</p></li>
<li><p><strong>n</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Either a positive integer (greater than 1) or None. If n is a positive integer,
this function will recursively create a seed plan by either biting off districts from graph
or dividing graph into n chunks and recursing into each of these. If n is None, this
function prime factors <a href="#id1"><span class="problematic" id="id2">``</span></a>num_dists``=n_1*n_2*…*n_k (n_1 &gt; n_2 &gt; … n_k) and recursively
partitions graph into n_1 chunks. Defaults to None.</p></li>
<li><p><strong>ceil</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Either a positive integer (at least 2) or None. Relevant only if n is None. If
<code class="docutils literal notranslate"><span class="pre">ceil</span></code> is a positive integer then finds the largest factor of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> less than or
equal to <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, and recursively splits graph into that number of chunks, or bites off a
district if that number is 1. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">recursive_seed_part_inner</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, num_dists: int, pop_target: Union[float, int], pop_col: str, epsilon: float, method: Callable = functools.partial(&lt;function bipartition_tree&gt;, max_attempts=10000), node_repeats: int = 1, n: Optional[int] = None, ceil: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; List[Set]<a class="reference internal" href="_modules/gerrychain/tree.html#recursive_seed_part_inner"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Inner function for recursive_seed_part.
Returns a partition with <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> districts balanced within <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code>.
Splits graph into num_chunks chunks, and then recursively splits each chunk into
<code class="docutils literal notranslate"><span class="pre">num_dists</span></code>/num_chunks chunks.
The number num_chunks of chunks is chosen based on <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">ceil</span></code> as follows:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is None, and <code class="docutils literal notranslate"><span class="pre">ceil</span></code> is None, num_chunks is the largest prime factor
of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is None and <code class="docutils literal notranslate"><span class="pre">ceil</span></code> is an integer at least 2, then num_chunks is the
largest prime factor of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> that is less than <code class="docutils literal notranslate"><span class="pre">ceil</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is a positive integer, num_chunks equals n.</p></li>
</ul>
<p>Finally, if the number of chunks as chosen above does not divide <code class="docutils literal notranslate"><span class="pre">num_dists</span></code>, then
this function bites off a single district from the graph and recursively partitions
the remaining graph into <code class="docutils literal notranslate"><span class="pre">num_dists</span> <span class="pre">-</span> <span class="pre">1</span></code> districts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The underlying graph structure.</p></li>
<li><p><strong>num_dists</strong> (<em>int</em>) – number of districts to partition the graph into</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>float</em><em>, </em><em>int</em><em>]</em>) – Target population for each part of the partition</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>method</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function used to find balanced partitions at the 2-district level.
Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></p></li>
<li><p><strong>node_repeats</strong> (<em>int</em><em>, </em><em>optional</em>) – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.
Defaults to 1.</p></li>
<li><p><strong>n</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Either a positive integer (greater than 1) or None. If n is a positive integer,
this function will recursively create a seed plan by either biting off districts from
graph or dividing graph into n chunks and recursing into each of these. If n is None,
this function prime factors <a href="#id3"><span class="problematic" id="id4">``</span></a>num_dists``=n_1*n_2*…*n_k (n_1 &gt; n_2 &gt; … n_k) and
recursively partitions graph into n_1 chunks. Defaults to None.</p></li>
<li><p><strong>ceil</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – Either a positive integer (at least 2) or None. Relevant only if n is None.
If <code class="docutils literal notranslate"><span class="pre">ceil</span></code> is a positive integer then finds the largest factor of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> less
than or equal to <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, and recursively splits graph into that number of chunks, or
bites off a district if that number is 1. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List of lists, each list is a district</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">recursive_tree_part</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph, parts: Sequence, pop_target: Union[float, int], pop_col: str, epsilon: float, node_repeats: int = 1, method: Callable = functools.partial(&lt;function bipartition_tree&gt;, max_attempts=10000)</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/tree.html#recursive_tree_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Uses <a class="reference internal" href="api.html#gerrychain.tree.bipartition_tree" title="gerrychain.tree.bipartition_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></a> recursively to partition a tree into
<code class="docutils literal notranslate"><span class="pre">len(parts)</span></code> parts of population <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> (within <code class="docutils literal notranslate"><span class="pre">epsilon</span></code>). Can be used to
generate initial seed plans or to implement ReCom-like “merge walk” proposals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – The graph</p></li>
<li><p><strong>parts</strong> (<em>Sequence</em>) – Iterable of part labels (like <code class="docutils literal notranslate"><span class="pre">[0,1,2]</span></code> or <code class="docutils literal notranslate"><span class="pre">range(4)</span></code>)</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>float</em><em>, </em><em>int</em><em>]</em>) – Target population for each part of the partition</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>node_repeats</strong> (<em>int</em><em>, </em><em>optional</em>) – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.
Defaluts to 1.</p></li>
<li><p><strong>method</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The partition method to use. Defaults to
<cite>partial(bipartition_tree, max_attempts=10000)</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">successors</code><span class="sig-paren">(</span><em class="sig-param">h: networkx.classes.graph.Graph</em>, <em class="sig-param">root: Any</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/tree.html#successors"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">uniform_spanning_tree</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph</em>, <em class="sig-param">choice: Callable = &lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em><span class="sig-paren">)</span> &#x2192; networkx.classes.graph.Graph<a class="reference internal" href="_modules/gerrychain/tree.html#uniform_spanning_tree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Builds a spanning tree chosen uniformly from the space of all
spanning trees of the graph. Uses Wilson’s algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>nx.Graph</em>) – Networkx Graph</p></li>
<li><p><strong>choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – <code class="xref py py-func docutils literal notranslate"><span class="pre">random.choice()</span></code>. Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">random.choice()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A spanning tree of the graph chosen uniformly at random.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nx.Graph</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="constraints">
<h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.bounds.</code><code class="sig-name descname">Bounds</code><span class="sig-paren">(</span><em class="sig-param">func: Callable, bounds: Tuple[float, float]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#Bounds"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for numeric-validators to enforce upper and lower limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within set limits, and
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – Numeric validator function. Should return an iterable of values.</p></li>
<li><p><strong>bounds</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – Tuple of (lower, upper) numeric bounds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.bounds.</code><code class="sig-name descname">LowerBound</code><span class="sig-paren">(</span><em class="sig-param">func: Callable</em>, <em class="sig-param">bound: float</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#LowerBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for numeric-validators to enforce lower limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set lower limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – Numeric validator function. Should return a comparable value.</p></li>
<li><p><strong>bounds</strong> (<em>float</em>) – Comparable lower bound.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.bounds.</code><code class="sig-name descname">SelfConfiguringLowerBound</code><span class="sig-paren">(</span><em class="sig-param">func: Callable</em>, <em class="sig-param">epsilon: float = 0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#SelfConfiguringLowerBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for numeric-validators to enforce automatic lower limits.</p>
<p>When instantiated, the initial lower bound is set as the initial value of
the numeric-validator minus some configurable ε.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set lower limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – Numeric validator function.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em><em>, </em><em>optional</em>) – Initial population deviation allowable by the validator
as a percentage of the ideal population. Defaults to 0.05.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.bounds.</code><code class="sig-name descname">SelfConfiguringUpperBound</code><span class="sig-paren">(</span><em class="sig-param">func: Callable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#SelfConfiguringUpperBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for numeric-validators to enforce automatic upper limits.</p>
<p>When instantiated, the initial upper bound is set as the initial value of
the numeric-validator.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set upper limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – Numeric validator function.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.bounds.</code><code class="sig-name descname">UpperBound</code><span class="sig-paren">(</span><em class="sig-param">func: Callable</em>, <em class="sig-param">bound: float</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#UpperBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for numeric-validators to enforce upper limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set upper limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – Numeric validator function. Should return a comparable value.</p></li>
<li><p><strong>bounds</strong> (<em>float</em>) – Comparable upper bound.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.bounds.</code><code class="sig-name descname">WithinPercentRangeOfBounds</code><span class="sig-paren">(</span><em class="sig-param">func: Callable</em>, <em class="sig-param">percent: float</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#WithinPercentRangeOfBounds"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for numeric-validators to enforce upper and lower limits
determined by a percentage of the initial value.</p>
<p>When instantiated, the initial upper and lower bounds are set as the
initial value of the numeric-validator times (1 ± percent).</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within the desired
percentage range of the initial value, and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – Numeric validator function.</p></li>
<li><p><strong>percent</strong> (<em>float</em>) – Percentage of the initial value to use as the bounds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The percentage is assumed to be in the range [0.0, 100.0].</p>
</div>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.compactness.</code><code class="sig-name descname">L1_polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/constraints/compactness.html#L1_polsby_popper"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the <span class="math notranslate nohighlight">\(L^1\)</span> norm of the Polsby-Popper scores
for the given partition</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Partition representing a districting plan</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\(L^1\)</span> norm of the reciprocal Polsby-Popper scores</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.compactness.</code><code class="sig-name descname">L1_reciprocal_polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/constraints/compactness.html#L1_reciprocal_polsby_popper"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the <span class="math notranslate nohighlight">\(L^1\)</span> norm of the reciprocal Polsby-Popper scores
for the given partition</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Partition representing a districting plan</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\(L^1\)</span> norm of the reciprocal Polsby-Popper scores</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.compactness.</code><code class="sig-name descname">L2_polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/constraints/compactness.html#L2_polsby_popper"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the <span class="math notranslate nohighlight">\(L^2\)</span> norm of the Polsby-Popper scores
for the given partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Partition representing a districting plan</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\(L^2\)</span> norm of the Polsby-Popper scores</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.compactness.</code><code class="sig-name descname">L_minus_1_polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/compactness.html#L_minus_1_polsby_popper"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the <span class="math notranslate nohighlight">\(L^{-1}\)</span> norm of the Polsby-Popper scores
for the given partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Partition representing a districting plan</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\(L^{-1}\)</span> norm of the Polsby-Popper scores</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">affected_parts</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; Set[int]<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#affected_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Checks which partitions were affected by the change of nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The proposed next <a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The set of IDs of all parts that gained or lost a node
when compared to the parent partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">are_reachable</code><span class="sig-paren">(</span><em class="sig-param">G: networkx.classes.graph.Graph</em>, <em class="sig-param">source: Any</em>, <em class="sig-param">avoid: Callable</em>, <em class="sig-param">targets: Any</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#are_reachable"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A modified version of NetworkX’s function
<cite>networkx.algorithms.shortest_paths.weighted._dijkstra_multisource()</cite></p>
<p>This function checks if the targets are reachable from the source node
while avoiding edges based on the avoid condition function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>G</strong> (<em>nx.Graph</em>) – The networkx graph</p></li>
<li><p><strong>source</strong> (<em>int</em>) – The starting node</p></li>
<li><p><strong>avoid</strong> (<em>Callable</em>) – The function that determines if an edge should be avoided.
It should take in three parameters: the start node, the end node, and
the edges to avoid. It should return True if the edge should be avoided,
False otherwise.</p></li>
<li><p><strong>targets</strong> (<em>Any</em>) – The target nodes that we would like to reach</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if all of the targets are reachable from the source node
under the avoid condition, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">contiguous</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#contiguous"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Check if the parts of a partition are connected using <code class="xref py py-func docutils literal notranslate"><span class="pre">networkx.is_connected()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The proposed next <a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the partition is contiguous</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">contiguous_bfs</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#contiguous_bfs"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Checks that a given partition’s parts are connected as graphs using a simple
breadth-first search.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Instance of Partition</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the parts of this partition are connected</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">contiguous_components</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; Dict[int, list]<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#contiguous_components"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return the connected components of each of the subgraphs of the parts
of the partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Instance of Partition; contains connected components.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary mapping each part ID to a list holding the connected
subgraphs of that part of the partition</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">number_of_contiguous_parts</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#number_of_contiguous_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Instance of Partition; contains connected components.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of contiguous parts in the partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.contiguity.</code><code class="sig-name descname">single_flip_contiguous</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#single_flip_contiguous"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Check if swapping the given node from its old assignment disconnects the
old assignment class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The proposed next <a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether the partition is contiguous</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p>We assume that <cite>removed_node</cite> belonged to an assignment class that formed a
connected subgraph. To see if its removal left the subgraph connected, we
check that the neighbors of the removed node are still connected through
the changed graph.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.validity.</code><code class="sig-name descname">Validator</code><span class="sig-paren">(</span><em class="sig-param">constraints: List[Callable]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#Validator"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A single callable for checking that a partition passes a collection of
constraints. Intended to be passed as the <code class="docutils literal notranslate"><span class="pre">is_valid</span></code> parameter when
instantiating <a class="reference internal" href="api.html#gerrychain.MarkovChain" title="gerrychain.MarkovChain"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkovChain</span></code></a>.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if all validators pass, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if any one fails.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">is_valid</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">([</span><span class="n">constraint1</span><span class="p">,</span> <span class="n">constraint2</span><span class="p">,</span> <span class="n">constraint3</span><span class="p">])</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">is_valid</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.MarkovChain.constraints" title="gerrychain.MarkovChain.constraints"><strong>constraints</strong></a> – List of validator functions that will check partitions.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>constraints</strong> (<em>List</em><em>[</em><em>Callable</em><em>]</em>) – List of validator functions that will check partitions.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.validity.</code><code class="sig-name descname">deviation_from_ideal</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em>, <em class="sig-param">attribute: str = 'population'</em><span class="sig-paren">)</span> &#x2192; Dict[int, float]<a class="reference internal" href="_modules/gerrychain/constraints/validity.html#deviation_from_ideal"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the deviation of the given <code class="docutils literal notranslate"><span class="pre">attribute</span></code> from exact equality
among parts of the partition. Usually <code class="docutils literal notranslate"><span class="pre">attribute</span></code> is the population, and
this function is used to compute how far a districting plan is from exact population
equality.</p>
<p>By “deviation” we mean <code class="docutils literal notranslate"><span class="pre">(actual_value</span> <span class="pre">-</span> <span class="pre">ideal)/ideal</span></code> (not the absolute value).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – A partition.</p></li>
<li><p><strong>attribute</strong> (<em>str</em><em>, </em><em>optional</em>) – The <a class="reference internal" href="api.html#gerrychain.updaters.Tally" title="gerrychain.updaters.Tally"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tally</span></code></a> to
compute deviation for. Default is <code class="docutils literal notranslate"><span class="pre">&quot;population&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary from parts to their deviation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[int, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.validity.</code><code class="sig-name descname">districts_within_tolerance</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em>, <em class="sig-param">attribute_name: str = 'population'</em>, <em class="sig-param">percentage: float = 0.1</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/constraints/validity.html#districts_within_tolerance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Check if all districts are within a certain percentage of the “smallest”
district, as defined by the given attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Partition class instance</p></li>
<li><p><strong>attrName</strong> (<em>str</em><em>, </em><em>optional</em>) – String that is the name of an updater in partition. Default is
<code class="docutils literal notranslate"><span class="pre">&quot;population&quot;</span></code>.</p></li>
<li><p><strong>percentage</strong> (<em>float</em><em>, </em><em>optional</em>) – What percent (as a number between 0 and 1) difference is allowed.
Default is 0.1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the districts are within specified tolerance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.validity.</code><code class="sig-name descname">no_vanishing_districts</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/constraints/validity.html#no_vanishing_districts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Require that no districts be completely consumed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Partition to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether no districts are completely consumed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.validity.</code><code class="sig-name descname">refuse_new_splits</code><span class="sig-paren">(</span><em class="sig-param">partition_county_field: str</em><span class="sig-paren">)</span> &#x2192; Callable[[gerrychain.partition.partition.Partition], bool]<a class="reference internal" href="_modules/gerrychain/constraints/validity.html#refuse_new_splits"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Refuse all proposals that split a county that was previous unsplit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition_county_field</strong> (<em>str</em>) – Name of field for county information generated by
<a class="reference internal" href="api.html#gerrychain.updaters.county_splits" title="gerrychain.updaters.county_splits"><code class="xref py py-func docutils literal notranslate"><span class="pre">county_splits()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Function that returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the proposal does not split any new counties.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable[[<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a>], bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.constraints.validity.</code><code class="sig-name descname">within_percent_of_ideal_population</code><span class="sig-paren">(</span><em class="sig-param">initial_partition: gerrychain.partition.partition.Partition</em>, <em class="sig-param">percent: float = 0.01</em>, <em class="sig-param">pop_key: str = 'population'</em><span class="sig-paren">)</span> &#x2192; gerrychain.constraints.bounds.Bounds<a class="reference internal" href="_modules/gerrychain/constraints/validity.html#within_percent_of_ideal_population"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Require that all districts are within a certain percent of “ideal” (i.e.,
uniform) population.</p>
<p>Ideal population is defined as “total population / number of districts.”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – Starting partition from which to compute district information.</p></li>
<li><p><strong>percent</strong> (<em>float</em><em>, </em><em>optional</em>) – Allowed percentage deviation. Default is 1%.</p></li>
<li><p><strong>pop_key</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the population
<a class="reference internal" href="api.html#gerrychain.updaters.Tally" title="gerrychain.updaters.Tally"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tally</span></code></a>. Default is <code class="docutils literal notranslate"><span class="pre">&quot;population&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="api.html#gerrychain.constraints.Bounds" title="gerrychain.constraints.Bounds"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bounds</span></code></a> constraint on the population attribute identified
by <code class="docutils literal notranslate"><span class="pre">pop_key</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.constraints.Bounds" title="gerrychain.constraints.Bounds">Bounds</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="graph">
<h2>Graph<a class="headerlink" href="#graph" title="Permalink to this headline">¶</a></h2>
<p>This module provides a set of functions to help determine and
manipulate the adjacency of geometries within a particular
graph. The functions in this module are used internally to ensure
that the geometry data that we are working with is sufficiently
well-defined to be used for analysis.</p>
<p>Some of the type hints in this module are intentionally left
unspecified because of import issues.</p>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">intersections_with_neighbors</code><span class="sig-paren">(</span><em class="sig-param">geometries</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#intersections_with_neighbors"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Generator yielding tuples of the form (id, {neighbor_id: intersection}).
The intersections may be empty!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geometries</strong> (<em>shapely.geometry.BaseGeometry</em>) – A Shapeley geometry object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator yielding tuples of the form (id, {neighbor_id: intersection})</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">neighboring_geometries</code><span class="sig-paren">(</span><em class="sig-param">geometries</em>, <em class="sig-param">tree=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#neighboring_geometries"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Generator yielding tuples of the form (id, (ids of neighbors)).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometries</strong> (<em>shapely.geometry.BaseGeometry</em>) – A Shapeley geometry object to construct the tree from</p></li>
<li><p><strong>tree</strong> (<em>shapely.strtree.STRtree</em><em>, </em><em>optional</em>) – A Sort-Tile-Recursive tree for spatial indexing. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator yielding tuples of the form (id, (ids of neighbors))</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">neighbors</code><span class="sig-paren">(</span><em class="sig-param">df: &lt;Mock name='mock.GeoDataFrame' id='139958608941936'&gt;</em>, <em class="sig-param">adjacency: str</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#neighbors"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">queen</code><span class="sig-paren">(</span><em class="sig-param">geometries</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#queen"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geometries</strong> (<em>shapely.geometry.BaseGeometry</em>) – A Shapeley geometry object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The queen adjacency dictionary for the given collection of polygons.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">rook</code><span class="sig-paren">(</span><em class="sig-param">geometries</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#rook"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geometries</strong> (<em>shapely.geometry.BaseGeometry</em>) – A Shapeley geometry object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The rook adjacency dictionary for the given collection of polygons.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">str_tree</code><span class="sig-paren">(</span><em class="sig-param">geometries</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#str_tree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add ids to geometries and create a STR tree for spatial indexing.
Use this for all spatial operations!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geometries</strong> (<em>shapely.geometry.BaseGeometry</em>) – A Shapely geometry object to construct the tree from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Sort-Tile-Recursive tree for spatial indexing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>shapely.strtree.STRtree</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.adjacency.</code><code class="sig-name descname">warn_for_overlaps</code><span class="sig-paren">(</span><em class="sig-param">intersection_pairs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/adjacency.html#warn_for_overlaps"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>intersection_pairs</strong> (<em>Iterable</em>) – An iterable of tuples of
the form (id, {neighbor_id: intersection})</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator yielding tuples of intersection pairs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UserWarning if there are overlaps among the given polygons</p>
</dd>
</dl>
</dd></dl>

<p>This module contains functions for working with GeoDataFrames and Shapely
geometries. Specifically, it contains functions for handling and reprojecting
the Universal Transverse Mercator projection, and for identifying bad geometries
within a given GeoDataFrame.</p>
<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.graph.geo.</code><code class="sig-name descname">GeometryError</code><a class="reference internal" href="_modules/gerrychain/graph/geo.html#GeometryError"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Wrapper error class for projection failures.
Changing a map’s projection may create invalid geometries, which may
or may not be repairable using the <a class="reference external" href="https://shapely.readthedocs.io/en/stable/manual.html#constructive-methods">.buffer(0)</a> trick.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.geo.</code><code class="sig-name descname">explain_validity</code><span class="sig-paren">(</span><em class="sig-param">geo</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/gerrychain/graph/geo.html#explain_validity"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Given a geometry that is shapely interpretable, explain the validity.
Light wrapper around shapely’s explain_validity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geo</strong> (<em>shapely.geometry.BaseGeometry</em>) – Shapely geometry object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Explanation for the validity of the geometry</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.geo.</code><code class="sig-name descname">identify_utm_zone</code><span class="sig-paren">(</span><em class="sig-param">df: &lt;Mock name='mock.GeoDataFrame' id='139958608941936'&gt;</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/graph/geo.html#identify_utm_zone"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Given a GeoDataFrame, identify the Universal Transverse Mercator zone
number for the centroid of the geometries in the dataframe.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.geo.</code><code class="sig-name descname">invalid_geometries</code><span class="sig-paren">(</span><em class="sig-param">df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/geo.html#invalid_geometries"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Given a GeoDataFrame, returns a list of row indices
with invalid geometries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code>) – The GeoDataFrame to examine</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of row indices with invalid geometries</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.geo.</code><code class="sig-name descname">reprojected</code><span class="sig-paren">(</span><em class="sig-param">df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/geo.html#reprojected"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="simple">
<dt>Returns a copy of <cite>df</cite>, projected into the coordinate reference system of a suitable</dt><dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/UTM_coordinate_system">Universal Transverse Mercator</a> zone.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code>) – The GeoDataFrame to reproject</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A copy of <cite>df</cite>, projected into the coordinate reference system of a suitable
UTM zone.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.geo.</code><code class="sig-name descname">utm_of_point</code><span class="sig-paren">(</span><em class="sig-param">point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/geo.html#utm_of_point"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Given a point, return the Universal Transverse Mercator zone number
for that point.</p>
</dd></dl>

<p>This module provides tools for working with graphs in the context of geographic data.
It extends the functionality of the NetworkX library, adding support for spatial data structures,
geographic projections, and serialization to and from JSON format.</p>
<p>This module is designed to be used in conjunction with geopandas, shapely, and pandas libraries,
facilitating the integration of graph-based algorithms with geographic information systems (GIS).</p>
<p>Note:
This module relies on NetworkX, pandas, and geopandas, which should be installed and
imported as required.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">FrozenGraph</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#FrozenGraph"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents an immutable graph to be partitioned. It is based off <a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a>.</p>
<p>This speeds up chain runs and prevents having to deal with cache invalidation issues.
This class behaves slightly differently than <a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.Graph</span></code>.</p>
<p>Not intended to be a part of the public API.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The underlying graph.</p></li>
<li><p><strong>size</strong> – The number of nodes in the graph.</p></li>
</ul>
</dd>
</dl>
<p>The class uses <cite>__slots__</cite> for improved memory efficiency.</p>
<p>Initialize a FrozenGraph from a Graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> (<a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><em>Graph</em></a>) – The mutable Graph to be converted into an immutable graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">degree</code><a class="reference internal" href="_modules/gerrychain/graph/graph.html#FrozenGraph.degree"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">edge_indices</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">graph</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">lookup</code><a class="reference internal" href="_modules/gerrychain/graph/graph.html#FrozenGraph.lookup"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">neighbors</code><a class="reference internal" href="_modules/gerrychain/graph/graph.html#FrozenGraph.neighbors"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">node_indices</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">size</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">subgraph</code><span class="sig-paren">(</span><em class="sig-param">nodes: Iterable[Any]</em><span class="sig-paren">)</span> &#x2192; gerrychain.graph.graph.FrozenGraph<a class="reference internal" href="_modules/gerrychain/graph/graph.html#FrozenGraph.subgraph"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">Graph</code><span class="sig-paren">(</span><em class="sig-param">incoming_graph_data=None</em>, <em class="sig-param">**attr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.classes.graph.Graph</span></code></p>
<p>Represents a graph to be partitioned, extending the <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.Graph</span></code>.</p>
<p>This class includes additional class methods for constructing graphs from shapefiles,
and for saving and loading graphs in JSON format.</p>
<p>Initialize a graph with edges, name, or graph attributes.</p>
<dl class="simple">
<dt>incoming_graph_data<span class="classifier">input graph (optional, default: None)</span></dt><dd><p>Data to initialize graph. If None (default) an empty
graph is created.  The data can be an edge list, or any
NetworkX graph object.  If the corresponding optional Python
packages are installed the data can also be a 2D NumPy array, a
SciPy sparse matrix, or a PyGraphviz graph.</p>
</dd>
<dt>attr<span class="classifier">keyword arguments, optional (default= no attributes)</span></dt><dd><p>Attributes to add to graph as key=value pairs.</p>
</dd>
</dl>
<p>convert</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>  <span class="c1"># or DiGraph, MultiGraph, MultiDiGraph, etc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my graph&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>  <span class="c1"># list of edges</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<p>Arbitrary graph attribute pairs (key=value) may be assigned</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="s2">&quot;Friday&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">graph</span>
<span class="go">{&#39;day&#39;: &#39;Friday&#39;}</span>
</pre></div>
</div>
<dl class="method">
<dt>
<code class="sig-name descname">add_data</code><span class="sig-paren">(</span><em class="sig-param">df: &lt;Mock name='mock.DataFrame' id='139958609000912'&gt;</em>, <em class="sig-param">columns: Optional[Iterable[str]] = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.add_data"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add columns of a DataFrame to a graph as node attributes
by matching the DataFrame’s index to node ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) – Dataframe containing given columns.</p></li>
<li><p><strong>columns</strong> (<em>Optional</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – List of dataframe column names to add. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">edge_indices</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filename: str</em>, <em class="sig-param">adjacency: str = 'rook'</em>, <em class="sig-param">cols_to_add: Optional[List[str]] = None</em>, <em class="sig-param">reproject: bool = False</em>, <em class="sig-param">ignore_errors: bool = False</em><span class="sig-paren">)</span> &#x2192; gerrychain.graph.graph.Graph<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_file"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a <a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a> from a shapefile (or GeoPackage, or GeoJSON, or
any other library that <code class="xref py py-mod docutils literal notranslate"><span class="pre">geopandas</span></code> can read. See <a class="reference internal" href="api.html#gerrychain.graph.graph.Graph.from_geodataframe" title="gerrychain.graph.graph.Graph.from_geodataframe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_geodataframe()</span></code></a>
for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Path to the shapefile / GeoPackage / GeoJSON / etc.</p></li>
<li><p><strong>adjacency</strong> (<em>str</em><em>, </em><em>optional</em>) – The adjacency type to use (“rook” or “queen”). Default is “rook”</p></li>
<li><p><strong>cols_to_add</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – The names of the columns that you want to
add to the graph as node attributes. Default is None.</p></li>
<li><p><strong>reproject</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to reproject to a UTM projection before
creating the graph. Default is False.</p></li>
<li><p><strong>ignore_errors</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to ignore all invalid geometries and try to continue
creating the graph. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Graph object of the geometries from <cite>filename</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph">Graph</a></p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method requires the optional <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> dependency.
So please install <code class="docutils literal notranslate"><span class="pre">gerrychain</span></code> with the <code class="docutils literal notranslate"><span class="pre">geo</span></code> extra
via the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install gerrychain[geo]</span>
</pre></div>
</div>
<p>or install <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> separately.</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_geodataframe</code><span class="sig-paren">(</span><em class="sig-param">dataframe: &lt;Mock name='mock.DataFrame' id='139958609000912'&gt;</em>, <em class="sig-param">adjacency: str = 'rook'</em>, <em class="sig-param">cols_to_add: Optional[List[str]] = None</em>, <em class="sig-param">reproject: bool = False</em>, <em class="sig-param">ignore_errors: bool = False</em><span class="sig-paren">)</span> &#x2192; gerrychain.graph.graph.Graph<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_geodataframe"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Creates the adjacency <a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a> of geometries described by <cite>dataframe</cite>.
The areas of the polygons are included as node attributes (with key <cite>area</cite>).
The shared perimeter of neighboring polygons are included as edge attributes
(with key <cite>shared_perim</cite>).
Nodes corresponding to polygons on the boundary of the union of all the geometries
(e.g., the state, if your dataframe describes VTDs) have a <cite>boundary_node</cite> attribute
(set to <cite>True</cite>) and a <cite>boundary_perim</cite> attribute with the length of this “exterior”
boundary.</p>
<p>By default, areas and lengths are computed in a UTM projection suitable for the
geometries. This prevents the bizarro area and perimeter values that show up when
you accidentally do computations in Longitude-Latitude coordinates. If the user
specifies <cite>reproject=False</cite>, then the areas and lengths will be computed in the
GeoDataFrame’s current coordinate reference system. This option is for users who
have a preferred CRS they would like to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataframe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code>) – The GeoDateFrame to convert</p></li>
<li><p><strong>adjacency</strong> (<em>str</em><em>, </em><em>optional</em>) – The adjacency type to use (“rook” or “queen”).
Default is “rook”.</p></li>
<li><p><strong>cols_to_add</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – The names of the columns that you want to
add to the graph as node attributes. Default is None.</p></li>
<li><p><strong>reproject</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to reproject to a UTM projection before
creating the graph. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>ignore_errors</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to ignore all invalid geometries and
attept to create the graph anyway. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The adjacency graph of the geometries from <cite>dataframe</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph">Graph</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json_file: str</em><span class="sig-paren">)</span> &#x2192; gerrychain.graph.graph.Graph<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_json"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Load a graph from a JSON file in the NetworkX json_graph format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> (<em>str</em>) – Path to JSON file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The loaded graph as an instance of this class.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph">Graph</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_networkx</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.graph.Graph</em><span class="sig-paren">)</span> &#x2192; gerrychain.graph.graph.Graph<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_networkx"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a Graph instance from a networkx.Graph object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> (<em>networkx.Graph</em>) – The networkx graph to be converted.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The converted graph as an instance of this class.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph">Graph</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">islands</code></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The set of degree-0 nodes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Set</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">issue_warnings</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.issue_warnings"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UserWarning if the graph has any red flags (right now, only islands).</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">join</code><span class="sig-paren">(</span><em class="sig-param">dataframe: &lt;Mock name='mock.DataFrame' id='139958609000912'&gt;</em>, <em class="sig-param">columns: Optional[List[str]] = None</em>, <em class="sig-param">left_index: Optional[str] = None</em>, <em class="sig-param">right_index: Optional[str] = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.join"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add data from a dataframe to the graph, matching nodes to rows when
the node’s <cite>left_index</cite> attribute equals the row’s <cite>right_index</cite> value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataframe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>) – DataFrame.</p>
</dd>
<dt class="field-even">Columns</dt>
<dd class="field-even"><p>The columns whose data you wish to add to the graph.
If not provided, all columns are added. Default is None.</p>
</dd>
<dt class="field-odd">Left_index</dt>
<dd class="field-odd"><p>The node attribute used to match nodes to rows.
If not provided, node IDs are used. Default is None.</p>
</dd>
<dt class="field-even">Right_index</dt>
<dd class="field-even"><p>The DataFrame column name to use to match rows
to nodes. If not provided, the DataFrame’s index is used. Default is None.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">lookup</code><span class="sig-paren">(</span><em class="sig-param">node: Any</em>, <em class="sig-param">field: Any</em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.lookup"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Lookup a node/field attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Any</em>) – Node to look up.</p></li>
<li><p><strong>field</strong> (<em>Any</em>) – Field to look up.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the attribute <cite>field</cite> at <cite>node</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">node_indices</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">json_file: str</em>, <em class="sig-param">*</em>, <em class="sig-param">include_geometries_as_geojson: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.to_json"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Save a graph to a JSON file in the NetworkX json_graph format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_file</strong> (<em>str</em>) – Path to target JSON file.</p></li>
<li><p><strong>include_geometry_as_geojson</strong> (<em>bool</em>) – Whether to include
any <code class="xref py py-mod docutils literal notranslate"><span class="pre">shapely</span></code> geometry objects encountered in the graph’s node
attributes as GeoJSON. The default (<code class="docutils literal notranslate"><span class="pre">False</span></code>) behavior is to remove
all geometry objects because they are not serializable. Including the
GeoJSON will result in a much larger JSON file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">warn_for_islands</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.warn_for_islands"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UserWarning if the graph has any islands (degree-0 nodes).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">add_boundary_perimeters</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph</em>, <em class="sig-param">geometries: &lt;Mock name='mock.Series' id='139958609001056'&gt;</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#add_boundary_perimeters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add shared perimeter between nodes and the total geometry boundary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a>) – NetworkX graph</p></li>
<li><p><strong>geometries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.Series</span></code>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code> containing geometry information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The updated graph.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph">Graph</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">check_dataframe</code><span class="sig-paren">(</span><em class="sig-param">df: &lt;Mock name='mock.DataFrame' id='139958609000912'&gt;</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#check_dataframe"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UserWarning if the dataframe has any NA values.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">convert_geometries_to_geojson</code><span class="sig-paren">(</span><em class="sig-param">data: networkx.classes.graph.Graph</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#convert_geometries_to_geojson"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Convert geometry attributes in a NetworkX adjacency data object
to GeoJSON, so that they can be serialized. Mutates the <code class="docutils literal notranslate"><span class="pre">data</span></code> object.</p>
<p>Does nothing if no geometry attributes are found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>networkx.Graph</em>) – an adjacency data object (returned by
<code class="xref py py-func docutils literal notranslate"><span class="pre">networkx.readwrite.json_graph.adjacency_data()</span></code>)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">json_serialize</code><span class="sig-paren">(</span><em class="sig-param">input_object: Any</em><span class="sig-paren">)</span> &#x2192; Optional[int]<a class="reference internal" href="_modules/gerrychain/graph/graph.html#json_serialize"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This function is used to handle one of the common issues that
appears when trying to convert a pandas dataframe into a JSON
serializable object. Specifically, it handles the issue of converting
the pandas int64 to a python int so that JSON can serialize it.
This is specifically used so that we can write graphs out to JSON
files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_object</strong> (<em>Any</em><em> (</em><em>expected to be a pd.Int64Dtype</em><em>)</em>) – The object to be converted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The converted pandas object or None if input is not of type
pd.Int64Dtype</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">remove_geometries</code><span class="sig-paren">(</span><em class="sig-param">data: networkx.classes.graph.Graph</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/graph/graph.html#remove_geometries"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Remove geometry attributes from NetworkX adjacency data object,
because they are not serializable. Mutates the <code class="docutils literal notranslate"><span class="pre">data</span></code> object.</p>
<p>Does nothing if no geometry attributes are found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>networkx.Graph</em>) – an adjacency data object (returned by
<code class="xref py py-func docutils literal notranslate"><span class="pre">networkx.readwrite.json_graph.adjacency_data()</span></code>)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="meta">
<h2>Meta<a class="headerlink" href="#meta" title="Permalink to this headline">¶</a></h2>
<p>Simple tooling to collect diversity stats on chain runs</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.meta.diversity.</code><code class="sig-name descname">DiversityStats</code><span class="sig-paren">(</span><em class="sig-param">unique_plans: int</em>, <em class="sig-param">unique_districts: int</em>, <em class="sig-param">steps_taken: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/meta/diversity.html#DiversityStats"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Lightweight stats object that reports the diversity of a given chain.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unique_plans</strong> – The number of unique plans seen so far.</p></li>
<li><p><strong>unique_districts</strong> – The number of unique districts seen so far.</p></li>
<li><p><strong>steps_taken</strong> – The number of steps taken so far.</p></li>
</ul>
</dd>
</dl>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DiversityStats</span><span class="p">(</span><span class="n">unique_plans</span><span class="o">=</span><span class="mi">44162</span><span class="p">,</span> <span class="n">unique_districts</span><span class="o">=</span><span class="mi">82992</span><span class="p">,</span> <span class="n">steps_taken</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt>
<code class="sig-name descname">steps_taken</code><em class="property">: int</em><em class="property"> = None</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">unique_districts</code><em class="property">: int</em><em class="property"> = None</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">unique_plans</code><em class="property">: int</em><em class="property"> = None</em></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.meta.diversity.</code><code class="sig-name descname">collect_diversity_stats</code><span class="sig-paren">(</span><em class="sig-param">chain: Iterable[gerrychain.partition.partition.Partition]</em><span class="sig-paren">)</span> &#x2192; Iterable[Tuple[gerrychain.partition.partition.Partition, gerrychain.meta.diversity.DiversityStats]]<a class="reference internal" href="_modules/gerrychain/meta/diversity.html#collect_diversity_stats"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Report the diversity of the chain being run, live, as a drop-in wrapper.
Requires the cut_edges updater on each <cite>Partition</cite> object. Plans/districts
are considered distinct if they are not isomorphic. That is, relabled plans
and districts are considered non-unique and counted as duplicate.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">partition</span><span class="p">,</span> <span class="n">stats</span> <span class="ow">in</span> <span class="n">collect_diversity_stats</span><span class="p">(</span>
    <span class="n">Replay</span><span class="p">(</span>
        <span class="n">graph</span><span class="p">,</span>
        <span class="s2">&quot;sample-run.chain&quot;</span>
        <span class="p">)</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span>
    <span class="c1"># normal chain stuff here</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>chain</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a><em>]</em>) – A chain object to collect stats on.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable of <cite>(partition, DiversityStat)</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterable[Tuple[<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a>, <a class="reference internal" href="api.html#gerrychain.meta.diversity.DiversityStats" title="gerrychain.meta.diversity.DiversityStats">DiversityStats</a>]]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="metrics">
<h2>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.compactness.</code><code class="sig-name descname">compute_polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">area: float</em>, <em class="sig-param">perimeter: float</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/metrics/compactness.html#compute_polsby_popper"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the Polsby-Popper score for a single district.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>area</strong> (<em>float</em>) – The area of the district</p></li>
<li><p><strong>perimeter</strong> (<em>float</em>) – The perimeter of the district</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Polsby-Popper score for the district</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.compactness.</code><code class="sig-name descname">polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict[int, float]<a class="reference internal" href="_modules/gerrychain/metrics/compactness.html#polsby_popper"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes Polsby-Popper compactness scores for each district in the partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The partition to compute scores for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each district ID to its Polsby-Popper score</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[int, float]</p>
</dd>
</dl>
</dd></dl>

<p>The partisan metrics in this file are later used in the module
gerrychain.updaters.election.py. Thus, all of the election
results objects here are implicilty typed as ElectionResults,
but cannot be given an explicit type annotation due to problems
with circular imports.</p>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.partisan.</code><code class="sig-name descname">efficiency_gap</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#efficiency_gap"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the efficiency gap for the given ElectionResults.
A positive value indicates an advantage for the first party listed
in the Election’s parties_to_columns dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>election_results</strong> (<a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><em>ElectionResults</em></a>) – An ElectionResults object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The efficiency gap for the given ElectionResults</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.partisan.</code><code class="sig-name descname">mean_median</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#mean_median"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the Mean-Median score for the given ElectionResults.
A positive value indicates an advantage for the first party listed
in the Election’s parties_to_columns dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>election_results</strong> (<a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><em>ElectionResults</em></a>) – An ElectionResults object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Mean-Median score for the given ElectionResults</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.partisan.</code><code class="sig-name descname">mean_thirdian</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#mean_thirdian"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the Mean-Median score for the given ElectionResults.
A positive value indicates an advantage for the first party listed
in the Election’s parties_to_columns dictionary.</p>
<p>The motivation for this score is that the minority party in many
states struggles to win even a third of the seats.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>election_results</strong> (<a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><em>ElectionResults</em></a>) – An ElectionResults object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Mean-Thirdian score for the given ElectionResults</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.partisan.</code><code class="sig-name descname">partisan_bias</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#partisan_bias"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the partisan bias for the given ElectionResults.
The partisan bias is defined as the number of districts with above-mean
vote share by the first party divided by the total number of districts,
minus 1/2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>election_results</strong> (<a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><em>ElectionResults</em></a>) – An ElectionResults object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The partisan bias for the given ElectionResults</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.partisan.</code><code class="sig-name descname">partisan_gini</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#partisan_gini"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the partisan Gini score for the given ElectionResults.
The partisan Gini score is defined as the area between the seats-votes
curve and its reflection about (.5, .5).</p>
<p>For more information on the computation, see Definition 1 in:
<a class="reference external" href="https://arxiv.org/pdf/2008.06930.pdf">https://arxiv.org/pdf/2008.06930.pdf</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>election_results</strong> (<a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><em>ElectionResults</em></a>) – An ElectionResults object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The partisan Gini score for the given ElectionResults</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.metrics.partisan.</code><code class="sig-name descname">wasted_votes</code><span class="sig-paren">(</span><em class="sig-param">party1_votes: int</em>, <em class="sig-param">party2_votes: int</em><span class="sig-paren">)</span> &#x2192; Tuple[int, int]<a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#wasted_votes"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the wasted votes for each party in the given race.
:param party1_votes: the number of votes party1 received in the race
:type party1_votes: int
:param party2_votes: the number of votes party2 received in the race
:type party2_votes: int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of the wasted votes for each party</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[int, int]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="partition">
<h2>Partition<a class="headerlink" href="#partition" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.partition.assignment.</code><code class="sig-name descname">Assignment</code><span class="sig-paren">(</span><em class="sig-param">parts: Dict</em>, <em class="sig-param">mapping: Optional[Dict] = None</em>, <em class="sig-param">validate: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></p>
<p>An assignment of nodes into parts.</p>
<p>The goal of <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> is to provide an interface that mirrors a
dictionary (what we have been using for assigning nodes to districts) while making it
convenient/cheap to access the set of nodes in each part.</p>
<p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> has a <code class="docutils literal notranslate"><span class="pre">parts</span></code> property that is a dictionary of the form
<code class="docutils literal notranslate"><span class="pre">{part:</span> <span class="pre">&lt;frozenset</span> <span class="pre">of</span> <span class="pre">nodes</span> <span class="pre">in</span> <span class="pre">part&gt;}</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parts</strong> (<em>Dict</em>) – Dictionary mapping partition assignments frozensets of nodes.</p></li>
<li><p><strong>mapping</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) – Dictionary mapping nodes to partition assignments.
Default is None.</p></li>
<li><p><strong>validate</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to validate the assignment. Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if the keys of <code class="docutils literal notranslate"><span class="pre">parts</span></code> are not unique</p></li>
<li><p><strong>TypeError</strong> – if the values of <code class="docutils literal notranslate"><span class="pre">parts</span></code> are not frozensets</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.copy"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns a copy of the assignment.
Does not duplicate the frozensets of nodes, just the parts dictionary.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">assignment: Dict</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.assignment.Assignment<a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.from_dict"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create an <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> from a dictionary. This is probably the method you want
to use to create a new assignment.</p>
<p>This also works for <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.Series</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>assignment</strong> (<em>Dict</em>) – dictionary mapping nodes to partition assignments</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> with the same assignments as the
passed-in dictionary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Assignment</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.items"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Iterate over <code class="docutils literal notranslate"><span class="pre">(node,</span> <span class="pre">part)</span></code> tuples, where <code class="docutils literal notranslate"><span class="pre">node</span></code> is assigned to <code class="docutils literal notranslate"><span class="pre">part</span></code>.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.keys"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">mapping</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">parts</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.to_dict"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The assignment as a <code class="docutils literal notranslate"><span class="pre">{node:</span> <span class="pre">part}</span></code> dictionary.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">to_series</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; &lt;Mock name='mock.Series' id='139958609001056'&gt;<a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.to_series"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The assignment as a <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.Series</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">update_flows</code><span class="sig-paren">(</span><em class="sig-param">flows</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.update_flows"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Update the assignment for some nodes using the given flows.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">update_parts</code><span class="sig-paren">(</span><em class="sig-param">new_parts: Dict</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.update_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Update some parts of the assignment. Does not check that every node is
still assigned to a part.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_parts</strong> (<em>Dict</em>) – dictionary mapping (some) parts to their new sets or
frozensets of nodes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/assignment.html#Assignment.values"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.partition.assignment.</code><code class="sig-name descname">get_assignment</code><span class="sig-paren">(</span><em class="sig-param">part_assignment: Union[str, Dict, gerrychain.partition.assignment.Assignment], graph: Optional[gerrychain.graph.graph.Graph] = None</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.assignment.Assignment<a class="reference internal" href="_modules/gerrychain/partition/assignment.html#get_assignment"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Either extracts an <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> object from the input graph
using the provided key or attempts to convert part_assignment into
an <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>part_assignment</strong> (<em>str</em>) – A node attribute key, dictionary, or
<code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> object corresponding to the desired assignment.</p></li>
<li><p><strong>graph</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><em>Graph</em></a><em>]</em><em>, </em><em>optional</em>) – The graph from which to extract the assignment.
Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code> object containing the assignment
corresponding to the part_assignment input</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Assignment</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If the part_assignment is a string and the graph
is not provided.</p></li>
<li><p><strong>TypeError</strong> – If the part_assignment is not a string or dictionary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.partition.assignment.</code><code class="sig-name descname">level_sets</code><span class="sig-paren">(</span><em class="sig-param">mapping: Dict</em>, <em class="sig-param">container: Type[Set] = &lt;class 'set'&gt;</em><span class="sig-paren">)</span> &#x2192; DefaultDict<a class="reference internal" href="_modules/gerrychain/partition/assignment.html#level_sets"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Inverts a dictionary. <code class="docutils literal notranslate"><span class="pre">{key:</span> <span class="pre">value}</span></code> becomes
<code class="docutils literal notranslate"><span class="pre">{value:</span> <span class="pre">&lt;container</span> <span class="pre">of</span> <span class="pre">keys</span> <span class="pre">that</span> <span class="pre">map</span> <span class="pre">to</span> <span class="pre">value&gt;}</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> (<em>Dict</em>) – A dictionary to invert. Keys and values can be of any type.</p></li>
<li><p><strong>container</strong> (<em>Type</em><em>[</em><em>Set</em><em>]</em><em>, </em><em>optional</em>) – A container type used to collect keys that map to the same value.
By default, the container type is <code class="docutils literal notranslate"><span class="pre">set</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary where each key is a value from the original dictionary,
and the corresponding value is a container (by default, a set) of keys from
the original dictionary that mapped to this value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DefaultDict</p>
</dd>
</dl>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code_block</span><span class="p">::</span> <span class="n">python</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">level_sets</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="go">defaultdict(&lt;class &#39;set&#39;&gt;, {1: {&#39;a&#39;, &#39;b&#39;}, 2: {&#39;c&#39;}})</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.partition.geographic.</code><code class="sig-name descname">GeographicPartition</code><span class="sig-paren">(</span><em class="sig-param">graph=None</em>, <em class="sig-param">assignment=None</em>, <em class="sig-param">updaters=None</em>, <em class="sig-param">parent=None</em>, <em class="sig-param">flips=None</em>, <em class="sig-param">use_default_updaters=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/geographic.html#GeographicPartition"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gerrychain.partition.partition.Partition</span></code></p>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code> with areas, perimeters, and boundary information included.
These additional data allow you to compute compactness scores like
<a class="reference external" href="https://en.wikipedia.org/wiki/Polsby-Popper_Test">Polsby-Popper</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – Underlying graph.</p></li>
<li><p><strong>assignment</strong> – Dictionary assigning nodes to districts.</p></li>
<li><p><strong>updaters</strong> – Dictionary of functions to track data about the partition.
The keys are stored as attributes on the partition class,
which the functions compute.</p></li>
<li><p><strong>use_default_updaters</strong> – If <cite>False</cite>, do not include default updaters.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">assignment</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">default_updaters</code><em class="property"> = {'area': &lt;gerrychain.updaters.tally.Tally object&gt;, 'boundary_nodes': &lt;function boundary_nodes&gt;, 'cut_edges': &lt;function cut_edges&gt;, 'cut_edges_by_part': &lt;function cut_edges_by_part&gt;, 'exterior_boundaries': &lt;function exterior_boundaries&gt;, 'interior_boundaries': &lt;function interior_boundaries&gt;, 'perimeter': &lt;function perimeter&gt;}</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">edge_flows</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">flips</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">flows</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">graph</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">parent</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">subgraphs</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">updaters</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.partition.partition.</code><code class="sig-name descname">Partition</code><span class="sig-paren">(</span><em class="sig-param">graph=None</em>, <em class="sig-param">assignment=None</em>, <em class="sig-param">updaters=None</em>, <em class="sig-param">parent=None</em>, <em class="sig-param">flips=None</em>, <em class="sig-param">use_default_updaters=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Partition represents a partition of the nodes of the graph. It will perform
the first layer of computations at each step in the Markov chain - basic
aggregations and calculations that we want to optimize.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The underlying graph.</p></li>
<li><p><strong>assignment</strong> – Maps node IDs to district IDs.</p></li>
<li><p><strong>parts</strong> – Maps district IDs to the set of nodes in that district.</p></li>
<li><p><strong>subgraphs</strong> – Maps district IDs to the induced subgraph of that district.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>graph</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>) – Underlying graph.</p></li>
<li><p><strong>assignment</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Assignment</span></code>) – Dictionary assigning nodes to districts.</p></li>
<li><p><strong>updaters</strong> – Dictionary of functions to track data about the partition.
The keys are stored as attributes on the partition class,
which the functions compute.</p></li>
<li><p><strong>use_default_updaters</strong> – If <cite>False</cite>, do not include default updaters.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">assignment</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">crosses_parts</code><span class="sig-paren">(</span><em class="sig-param">edge: Tuple</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.crosses_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>edge</strong> (<em>Tuple</em>) – tuple of node IDs</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the edge crosses from one part of the partition to another</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">default_updaters</code><em class="property"> = {'cut_edges': &lt;function cut_edges&gt;}</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">edge_flows</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">flip</code><span class="sig-paren">(</span><em class="sig-param">flips: Dict</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.flip"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the new partition obtained by performing the given <cite>flips</cite>
on this partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flips</strong> – dictionary assigning nodes of the graph to their new districts</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the new <code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">flips</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">flows</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_districtr_file</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph</em>, <em class="sig-param">districtr_file: str</em>, <em class="sig-param">updaters: Optional[Dict[str</em>, <em class="sig-param">Callable]] = None</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.from_districtr_file"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a Partition from a districting plan created with <a class="reference external" href="https://mggg.org/Districtr">Districtr</a>,
a free and open-source web app created by MGGG for drawing districts.</p>
<p>The provided <code class="docutils literal notranslate"><span class="pre">graph</span></code> should be created from the same shapefile as the
Districtr module used to draw the districting plan. These shapefiles may
be found in a repository in the <a class="reference external" href="https://github.com/mggg-states">mggg-states</a> GitHub organization, or by
request from MGGG.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>) – The graph to create the Partition from</p></li>
<li><p><strong>districtr_file</strong> (<em>str</em>) – the path to the <code class="docutils literal notranslate"><span class="pre">.json</span></code> file exported from Districtr</p></li>
<li><p><strong>updaters</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Callable</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – dictionary of updaters</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The partition created from the Districtr file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">graph</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.keys"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">parent</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">parts</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">geometries=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.plot"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Plot the partition, using the provided geometries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometries</strong> (<em>geopandas.GeoDataFrame</em><em> or </em><em>geopandas.GeoSeries</em>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code>
holding the geometries to use for plotting. Its <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> should match
the node labels of the partition’s underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – Additional arguments to pass to <code class="xref py py-meth docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame.plot()</span></code>
to adjust the plot.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The matplotlib axes object. Which plots the Partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">subgraphs</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">updaters</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.partition.subgraphs.</code><code class="sig-name descname">SubgraphView</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph, parts: List[List[Any]]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/subgraphs.html#SubgraphView"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A view for accessing subgraphs of <code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code> objects.</p>
<p>This class makes use of a subgraph cache to avoid recomputing subgraphs
which can speed up computations when working with district assignments
within a partition class.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The parent graph from which subgraphs are derived.</p></li>
<li><p><strong>parts</strong> – A list-of-lists dictionary (so a dict with key values indicated by
the list index) mapping keys to subsets of nodes in the graph.</p></li>
<li><p><strong>subgraphs_cache</strong> – Cache to store subgraph views for quick access.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><em>Graph</em></a>) – The parent graph from which subgraphs are derived.</p></li>
<li><p><strong>parts</strong> (<em>List</em><em>[</em><em>List</em><em>[</em><em>Any</em><em>]</em><em>]</em>) – A list of lists of nodes corresponding the different
parts of the partition of the graph.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">graph</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple[int, gerrychain.graph.graph.Graph]<a class="reference internal" href="_modules/gerrychain/partition/subgraphs.html#SubgraphView.items"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">parts</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">subgraphs_cache</code></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="proposals">
<h2>Proposals<a class="headerlink" href="#proposals" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">flip</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition</dt>
<dd><p>Proposes a random boundary flip from the partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">propose_any_node_flip</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#propose_any_node_flip"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Flip a random node (not necessarily on the boundary) to a random part</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">propose_chunk_flip</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#propose_chunk_flip"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Chooses a random boundary node and proposes to flip it and all of its neighbors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">propose_flip_every_district</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#propose_flip_every_district"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Proposes a random boundary flip for each district in the partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose the flips from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">propose_random_flip</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#propose_random_flip"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Proposes a random boundary flip from the partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">slow_reversible_propose</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#slow_reversible_propose"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Proposes a random boundary flip from the partition in a reversible fasion
by selecting uniformly from the (node, flip) pairs.</p>
<p>Temporary version until we make an updater for this set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.proposals.</code><code class="sig-name descname">slow_reversible_propose_bi</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#slow_reversible_propose_bi"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Proposes a random boundary flip from the partition in a reversible fashion
for bipartitions by selecting a boundary node at random and uniformly picking
one of its neighboring parts. For k-partitions this is not uniform since there
might be multiple parts next to a single node.</p>
<p>Temporary version until we make an updater for this set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A possible next <cite>~gerrychain.Partition</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.spectral_proposals.</code><code class="sig-name descname">spectral_cut</code><span class="sig-paren">(</span><em class="sig-param">graph: gerrychain.graph.graph.Graph</em>, <em class="sig-param">part_labels: Dict</em>, <em class="sig-param">weight_type: str</em>, <em class="sig-param">lap_type: str</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/proposals/spectral_proposals.html#spectral_cut"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Spectral cut function.</p>
<p>Uses the signs of the elements in the Fiedler vector of a graph to
partition into two components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="api.html#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><em>Graph</em></a>) – The graph to be partitioned.</p></li>
<li><p><strong>part_labels</strong> (<em>Dict</em>) – The current partition of the graph.</p></li>
<li><p><strong>weight_type</strong> (<em>str</em>) – The type of weight to be used in the Laplacian.</p></li>
<li><p><strong>lap_type</strong> (<em>str</em>) – The type of Laplacian to be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary assigning nodes of the graph to their new districts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.spectral_proposals.</code><code class="sig-name descname">spectral_recom</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition</em>, <em class="sig-param">weight_type: Optional[str] = None</em>, <em class="sig-param">lap_type: str = 'normalized'</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/spectral_proposals.html#spectral_recom"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Spectral ReCom proposal.</p>
<p>Uses spectral clustering to bipartition a subgraph of the original graph
formed by merging the nodes corresponding to two adjacent districts.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">gerrychain</span> <span class="kn">import</span> <span class="n">MarkovChain</span>
<span class="kn">from</span> <span class="nn">gerrychain.proposals</span> <span class="kn">import</span> <span class="n">recom</span>

<span class="c1"># ...define constraints, accept, partition, total_steps here...</span>


<span class="n">proposal</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">spectral_recom</span><span class="p">,</span> <span class="n">weight_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lap_type</span><span class="o">=</span><span class="s2">&quot;normalized&quot;</span>
<span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">partition</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The initial partition.</p></li>
<li><p><strong>weight_type</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – The type of weight to be used in the Laplacian. Default is None.</p></li>
<li><p><strong>lap_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of Laplacian to be used. Default is “normalized”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new partition resulting from the spectral ReCom algorithm.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.proposals.tree_proposals.</code><code class="sig-name descname">MetagraphError</code><a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#MetagraphError"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when the partition we are trying to split is a low degree
node in the metagraph.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.proposals.tree_proposals.</code><code class="sig-name descname">ReCom</code><span class="sig-paren">(</span><em class="sig-param">pop_col: str, ideal_pop: Union[int, float], epsilon: float, method: Callable = &lt;function bipartition_tree_random&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#ReCom"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>ReCom (short for ReCombination) is a class that represents a ReCom proposal
for redistricting. It is used to create new partitions by recombining existing
districts while maintaining population balance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pop_col</strong> (<em>str</em>) – The name of the column in the partition that contains the population data.</p></li>
<li><p><strong>ideal_pop</strong> (<em>Union</em><em>[</em><em>int</em><em>,</em><em>float</em><em>]</em>) – The ideal population for each district.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The epsilon value for population deviation as a percentage of the
target population.</p></li>
<li><p><strong>method</strong> (<em>function</em><em>, </em><em>optional</em>) – The method used for bipartitioning the tree.
Defaults to <cite>bipartition_tree_random</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.proposals.tree_proposals.</code><code class="sig-name descname">ReversibilityError</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#ReversibilityError"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when the cut edge upper bound is violated.</p>
</dd></dl>

<dl class="exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.proposals.tree_proposals.</code><code class="sig-name descname">ValueWarning</code><a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#ValueWarning"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></p>
<p>Raised whe a particular value is technically valid, but may
cause issues with the algorithm.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.tree_proposals.</code><code class="sig-name descname">recom</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition, pop_col: str, pop_target: Union[int, float], epsilon: float, node_repeats: int = 1, region_surcharge: Optional[Dict] = None, method: Callable = &lt;function bipartition_tree&gt;</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#recom"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>ReCom (short for ReCombination) is a Markov Chain Monte Carlo (MCMC) algorithm
used for redistricting. At each step of the algorithm, a pair of adjacent districts
is selected at random and merged into a single district. The region is then split
into two new districts by generating a spanning tree using the Kruskal/Karger
algorithm and cutting an edge at random. The edge is checked to ensure that it
separates the region into two new districts that are population balanced, and,
if not, a new edge is selected at random and the process is repeated.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">gerrychain</span> <span class="kn">import</span> <span class="n">MarkovChain</span>
<span class="kn">from</span> <span class="nn">gerrychain.proposals</span> <span class="kn">import</span> <span class="n">recom</span>

<span class="c1"># ...define constraints, accept, partition, total_steps here...</span>

<span class="c1"># Ideal population:</span>
<span class="n">pop_target</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="s2">&quot;population&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span>

<span class="n">proposal</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">recom</span><span class="p">,</span> <span class="n">pop_col</span><span class="o">=</span><span class="s2">&quot;POP10&quot;</span><span class="p">,</span> <span class="n">pop_target</span><span class="o">=</span><span class="n">pop_target</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">node_repeats</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">partition</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The initial partition.</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – The name of the population column.</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>int</em><em>,</em><em>float</em><em>]</em>) – The target population for each district.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The epsilon value for population deviation as a percentage of the
target population.</p></li>
<li><p><strong>node_repeats</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of times to repeat the bipartitioning step. Default is 1.</p></li>
<li><p><strong>region_surcharge</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) – The surcharge dictionary for the graph used for region-aware
partitioning of the grid. Default is None.</p></li>
<li><p><strong>method</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The method used for bipartitioning the tree. Default is
<a class="reference internal" href="api.html#gerrychain.tree.bipartition_tree" title="gerrychain.tree.bipartition_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new partition resulting from the ReCom algorithm.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.proposals.tree_proposals.</code><code class="sig-name descname">reversible_recom</code><span class="sig-paren">(</span><em class="sig-param">partition: gerrychain.partition.partition.Partition, pop_col: str, pop_target: Union[int, float], epsilon: float, balance_edge_fn: Callable = &lt;function find_balanced_edge_cuts_memoization&gt;, M: int = 1, repeat_until_valid: bool = False, choice: Callable = &lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em><span class="sig-paren">)</span> &#x2192; gerrychain.partition.partition.Partition<a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#reversible_recom"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Reversible ReCom algorithm for redistricting.</p>
<p>This function performs the reversible ReCom algorithm, which is a Markov Chain Monte
Carlo (MCMC) algorithm used for redistricting. For more information, see the paper
“Spanning Tree Methods for Sampling Graph Partitions” by Cannon, et al. (2022) at
<a class="reference external" href="https://arxiv.org/abs/2210.01401">https://arxiv.org/abs/2210.01401</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><em>Partition</em></a>) – The initial partition.</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – The name of the population column.</p></li>
<li><p><strong>pop_target</strong> (<em>Union</em><em>[</em><em>int</em><em>,</em><em>float</em><em>]</em>) – The target population for each district.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The epsilon value for population deviation as a percentage of the
target population.</p></li>
<li><p><strong>balance_edge_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The balance edge function. Default is
find_balanced_edge_cuts_memoization.</p></li>
<li><p><strong>M</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum number of balance edges. Default is 1.</p></li>
<li><p><strong>repeat_until_valid</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to repeat until a valid partition is
found. Default is False.</p></li>
<li><p><strong>choice</strong> (<em>Callable</em><em>, </em><em>optional</em>) – The choice function for selecting a random element. Default is random.choice.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new partition resulting from the reversible ReCom algorithm.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="updaters">
<h2>Updaters<a class="headerlink" href="#updaters" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">boundary_nodes</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">alias: str = 'boundary_nodes'</em><span class="sig-paren">)</span> &#x2192; Set<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#boundary_nodes"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p></li>
<li><p><strong>alias</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the attribute that the boundary nodes are
stored under. Default is ‘boundary_nodes’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The set of nodes in the partition that are on the boundary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">exterior_boundaries</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">previous: Set</em>, <em class="sig-param">inflow: Set</em>, <em class="sig-param">outflow: Set</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#exterior_boundaries"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Updater function that responds to the flow of nodes between different partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p></li>
<li><p><strong>previous</strong> (<em>Set</em>) – The previous set of exterior boundary nodes for a
fixed part of the given partition.</p></li>
<li><p><strong>inflow</strong> (<em>Set</em>) – The set of nodes that have flowed into the given part of the
partition.</p></li>
<li><p><strong>outflow</strong> (<em>Set</em>) – The set of nodes that have flowed out of the given part of the
partition.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict mapping each part of the partition to the new exterior
boundary of that part.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">exterior_boundaries_as_a_set</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">previous: Set</em>, <em class="sig-param">inflow: Set</em>, <em class="sig-param">outflow: Set</em><span class="sig-paren">)</span> &#x2192; Set<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#exterior_boundaries_as_a_set"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Updater function that responds to the flow of nodes between different partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p></li>
<li><p><strong>previous</strong> (<em>Set</em>) – The previous set of exterior boundary nodes for a
fixed part of the given partition.</p></li>
<li><p><strong>inflow</strong> (<em>Set</em>) – The set of nodes that have flowed into the given part of the
partition.</p></li>
<li><p><strong>outflow</strong> (<em>Set</em>) – The set of nodes that have flowed out of the given part of the
partition.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new set of exterior boundary nodes for the given part of the
partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">flips</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#flips"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The flips that were made to get from the parent partition to the
given partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">initialize_exterior_boundaries</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict[int, float]<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#initialize_exterior_boundaries"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part of a partition to the total
perimeter of the boundary nodes in that part.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[int, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">initialize_exterior_boundaries_as_a_set</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict[int, Set]<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#initialize_exterior_boundaries_as_a_set"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part of a partition to the set of nodes
in that part that are on the boundary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[int, Set]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">initialize_interior_boundaries</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#initialize_interior_boundaries"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part of a partition to the total
perimeter the given part shares with other parts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[int, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">interior_boundaries</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">previous: Set</em>, <em class="sig-param">new_edges: Set</em>, <em class="sig-param">old_edges: Set</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#interior_boundaries"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Updater function that responds to the flow of nodes between different partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p></li>
<li><p><strong>previous</strong> (<em>Set</em>) – The previous set of exterior boundary nodes for a
fixed part of the given partition.</p></li>
<li><p><strong>new_edges</strong> (<em>Set</em>) – The set of edges that have flowed into the given part of the
partition.</p></li>
<li><p><strong>old_edges</strong> (<em>Set</em>) – The set of edges that have flowed out of the given part of the
partition.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict mapping each part of the partition to the new interior
boundary of that part.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">perimeter</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict[int, float]<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#perimeter"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part of a partition to its perimeter.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[int, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.compactness.</code><code class="sig-name descname">perimeter_of_part</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">part: int</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/compactness.html#perimeter_of_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Totals up the perimeter of the part in the partition.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Requires that ‘boundary_perim’ be a node attribute, ‘shared_perim’ be an edge
attribute, ‘cut_edges’ be an updater, and ‘exterior_boundaries’ be an updater.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p></li>
<li><p><strong>part</strong> (<em>int</em>) – The id of the part of the partition whose perimeter we want to compute.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The perimeter of the desired part.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.county_splits.</code><code class="sig-name descname">CountyInfo</code><span class="sig-paren">(</span><em class="sig-param">split</em>, <em class="sig-param">nodes</em>, <em class="sig-param">contains</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>A named tuple to store county split information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>split</strong> (<em>int</em>) – The county split status. Makes use of
<a class="reference internal" href="api.html#gerrychain.updaters.CountySplit" title="gerrychain.updaters.CountySplit"><code class="xref py py-class docutils literal notranslate"><span class="pre">CountySplit</span></code></a> enum to compute.</p></li>
<li><p><strong>nodes</strong> (<em>List</em>) – The nodes that are contained in the county.</p></li>
<li><p><strong>contains</strong> (<em>Set</em>) – The assignment IDs that are contained in the county.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">contains</code></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">nodes</code></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">split</code></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.county_splits.</code><code class="sig-name descname">CountySplit</code><a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#CountySplit"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enum to track county splits in a partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>NOT_SPLIT</strong> – The county is not split.</p></li>
<li><p><strong>NEW_SPLIT</strong> – The county is split in the current partition.</p></li>
<li><p><strong>OLD_SPLIT</strong> – The county is split in the parent partition.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">NEW_SPLIT</code><em class="property"> = 1</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">NOT_SPLIT</code><em class="property"> = 0</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">OLD_SPLIT</code><em class="property"> = 2</em></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.county_splits.</code><code class="sig-name descname">compute_county_splits</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">county_field: str</em>, <em class="sig-param">partition_field: str</em><span class="sig-paren">)</span> &#x2192; Dict[str, gerrychain.updaters.county_splits.CountyInfo]<a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#compute_county_splits"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Track nodes in counties and information about their splitting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – The partition object to compute county splits for.</p></li>
<li><p><strong>county_field</strong> (<em>str</em>) – Name of county ID field on the graph.</p></li>
<li><p><strong>partition_field</strong> (<em>str</em>) – Name of the attribute in the graph
that stores the partition information. The county
split information will be computed with respect to this
division of the graph.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict containing the information on how counties changed
between the parent and child partitions. If there is no parent
partition, then only the OLD_SPLIT and NOT_SPLIT values will be
used.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, CountyInfo]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.county_splits.</code><code class="sig-name descname">county_splits</code><span class="sig-paren">(</span><em class="sig-param">partition_name: str</em>, <em class="sig-param">county_field_name: str</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#county_splits"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Update that allows for the tracking of county splits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition_name</strong> (<em>str</em>) – Name that the <a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a> instance will store.</p></li>
<li><p><strong>county_field_name</strong> (<em>str</em>) – Name of county ID field on the graph.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tracked data is a dictionary keyed on the county ID. The
stored values are tuples of the form <cite>(split, nodes, seen)</cite>.
<cite>split</cite> is a <a class="reference internal" href="api.html#gerrychain.updaters.CountySplit" title="gerrychain.updaters.CountySplit"><code class="xref py py-class docutils literal notranslate"><span class="pre">CountySplit</span></code></a> enum, <cite>nodes</cite> is a list of
node IDs, and <cite>seen</cite> is a list of assignment IDs that are
contained in the county.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.county_splits.</code><code class="sig-name descname">tally_region_splits</code><span class="sig-paren">(</span><em class="sig-param">reg_attr_lst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#tally_region_splits"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A naive updater for tallying the number of times a region attribute is split.
for each region attribute in reg_attr_lst.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reg_attr_lst</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of region names to tally splits for.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function that takes a partition and returns a dictionary which
maps the region name to the number of times that it is split in a
a particular partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.county_splits.</code><code class="sig-name descname">total_reg_splits</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">reg_attr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#total_reg_splits"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the total number of times that reg_attr is split in the partition.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.cut_edges.</code><code class="sig-name descname">cut_edges</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/cut_edges.html#cut_edges"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The set of edges that are cut by the given partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set[Tuple]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.cut_edges.</code><code class="sig-name descname">cut_edges_by_part</code><span class="sig-paren">(</span><em class="sig-param">partition, previous: Set[Tuple], new_edges: Set[Tuple], old_edges: Set[Tuple]</em><span class="sig-paren">)</span> &#x2192; Set[Tuple]<a class="reference internal" href="_modules/gerrychain/updaters/cut_edges.html#cut_edges_by_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Updater function that responds to the flow of edges between different partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p></li>
<li><p><strong>previous</strong> (<em>Set</em><em>[</em><em>Tuple</em><em>]</em>) – The previous set of edges for a fixed part of the given partition.</p></li>
<li><p><strong>new_edges</strong> (<em>Set</em><em>[</em><em>Tuple</em><em>]</em>) – The set of edges that have flowed into the given part of the
partition.</p></li>
<li><p><strong>old_edges</strong> (<em>Set</em><em>[</em><em>Tuple</em><em>]</em>) – The set of cut edges in the previous partition.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new set of cut edges for the newly generated partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.cut_edges.</code><code class="sig-name descname">initialize_cut_edges</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/cut_edges.html#initialize_cut_edges"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part of a partition to the set of edges
in that part.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.cut_edges.</code><code class="sig-name descname">new_cuts</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Set[Tuple]<a class="reference internal" href="_modules/gerrychain/updaters/cut_edges.html#new_cuts"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The set of edges that were not cut, but now are.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set[Tuple]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.cut_edges.</code><code class="sig-name descname">obsolete_cuts</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Set[Tuple]<a class="reference internal" href="_modules/gerrychain/updaters/cut_edges.html#obsolete_cuts"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The set of edges that were cut, but now are not.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set[Tuple]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.cut_edges.</code><code class="sig-name descname">put_edges_into_parts</code><span class="sig-paren">(</span><em class="sig-param">edges: List</em>, <em class="sig-param">assignment: Dict</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/updaters/cut_edges.html#put_edges_into_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>edges</strong> (<em>List</em>) – A list of edges in a graph which are to be separated
into their respective parts within the partition according to
the given assignment.</p></li>
<li><p><strong>assignment</strong> (<em>Dict</em>) – A dictionary mapping nodes to their respective
parts within the partition.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part of a partition to the set of edges
in that part.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">Election</code><span class="sig-paren">(</span><em class="sig-param">name: str, parties_to_columns: Union[Dict, List], alias: Optional[str] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#Election"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents the data of one election, with races conducted in each part of
the partition.</p>
<p>As we vary the districting plan, we can use the same node-level vote totals
to tabulate hypothetical elections. To do this manually with tallies, we would
have to maintain tallies for each party, as well as the total number of votes,
and then compute the electoral results and percentages from scratch every time.
To make this simpler, this class provides an <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionUpdater" title="gerrychain.updaters.election.ElectionUpdater"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionUpdater</span></code></a> to manage
these tallies. The updater returns an <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionResults</span></code></a> class giving
a convenient view of the election results, with methods like
<a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults.wins" title="gerrychain.updaters.election.ElectionResults.wins"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wins()</span></code></a> or <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults.percent" title="gerrychain.updaters.election.ElectionResults.percent"><code class="xref py py-meth docutils literal notranslate"><span class="pre">percent()</span></code></a> for common queries
the user might make on election results.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming your nodes have attributes &quot;2008_D&quot;, &quot;2008_R&quot;</span>
<span class="c1"># with (for example) 2008 senate election vote totals</span>
<span class="n">election</span> <span class="o">=</span> <span class="n">Election</span><span class="p">(</span>
    <span class="s2">&quot;2008 Senate&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;Democratic&quot;</span><span class="p">:</span> <span class="s2">&quot;2008_D&quot;</span><span class="p">,</span> <span class="s2">&quot;Republican&quot;</span><span class="p">:</span> <span class="s2">&quot;2008_R&quot;</span><span class="p">},</span>
    <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;2008_Sen&quot;</span>
<span class="p">)</span>

<span class="c1"># Assuming you already have a graph and assignment:</span>
<span class="n">partition</span> <span class="o">=</span> <span class="n">Partition</span><span class="p">(</span>
    <span class="n">graph</span><span class="p">,</span>
    <span class="n">assignment</span><span class="p">,</span>
    <span class="n">updaters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;2008_Sen&quot;</span><span class="p">:</span> <span class="n">election</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># The updater returns an ElectionResults instance, which</span>
<span class="c1"># we can use (for example) to see how many seats a given</span>
<span class="c1"># party would win in this partition using this election&#39;s</span>
<span class="c1"># vote distribution:</span>
<span class="n">partition</span><span class="p">[</span><span class="s2">&quot;2008_Sen&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wins</span><span class="p">(</span><span class="s2">&quot;Republican&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the election. (e.g. “2008 Presidential”)</p></li>
<li><p><strong>parties</strong> – A list of the names of the parties in the election.</p></li>
<li><p><strong>columns</strong> – A list of the columns in the graph’s node data that hold
the vote totals for each party.</p></li>
<li><p><strong>parties_to_columns</strong> – A dictionary mapping party names to the columns
in the graph’s node data that hold the vote totals for that party.</p></li>
<li><p><strong>tallies</strong> – A dictionary mapping party names to <code class="xref py py-class docutils literal notranslate"><span class="pre">DataTally</span></code> objects
that manage the vote totals for that party.</p></li>
<li><p><strong>updater</strong> – An <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionUpdater" title="gerrychain.updaters.election.ElectionUpdater"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionUpdater</span></code></a> object that manages the tallies
and returns an <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionResults</span></code></a> object.</p></li>
<li><p><strong>alias</strong> – The name that the election is registered under in the
partition’s dictionary of updaters.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the election. (e.g. “2008 Presidential”)</p></li>
<li><p><strong>parties_to_columns</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>]</em>) – A dictionary matching party names to their
data columns, either as actual columns (list-like, indexed by nodes)
or as string keys for the node attributes that hold the party’s
vote totals. Or, a list of strings which will serve as both
the party names and the node attribute keys.</p></li>
<li><p><strong>alias</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Alias that the election is registered under
in the Partition’s dictionary of updaters.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">ElectionResults</code><span class="sig-paren">(</span><em class="sig-param">election: gerrychain.updaters.election.Election, counts: Dict[str, Dict[int, float]], regions: List[int]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents the results of an election. Provides helpful methods to answer
common questions you might have about an election (Who won? How many seats?, etc.).</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="api.html#module-gerrychain.updaters.election" title="gerrychain.updaters.election"><strong>election</strong></a> – The <a class="reference internal" href="api.html#gerrychain.updaters.election.Election" title="gerrychain.updaters.election.Election"><code class="xref py py-class docutils literal notranslate"><span class="pre">Election</span></code></a> object that these results are associated with.</p></li>
<li><p><strong>totals_for_party</strong> – A dictionary mapping party names to the total number of votes
that party received in each part of the partition.</p></li>
<li><p><strong>regions</strong> – A list of regions that we would like the results for.</p></li>
<li><p><strong>totals</strong> – A dictionary mapping each part of the partition to the total number
of votes cast in that part.</p></li>
<li><p><strong>percents_for_party</strong> – A dictionary mapping party names to the percentage of votes
that party received in each part of the partition.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The variable “regions” is generally called “parts” in other sections of the
codebase, but we have changed it here to avoid confusion with the parameter
“party” that often appears within the class.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>election</strong> (<a class="reference internal" href="api.html#gerrychain.updaters.Election" title="gerrychain.updaters.Election"><em>Election</em></a>) – The <a class="reference internal" href="api.html#gerrychain.updaters.election.Election" title="gerrychain.updaters.election.Election"><code class="xref py py-class docutils literal notranslate"><span class="pre">Election</span></code></a> object that these results are associated with.</p></li>
<li><p><strong>regions</strong> (<em>List</em><em>[</em><em>int</em><em>]</em>) – A list of regions that we would like to consider (e.g. congressional
districts).</p></li>
</ul>
</dd>
<dt class="field-even">Counts</dt>
<dd class="field-even"><p>A dictionary mapping party names to the total number of votes that party
received in each part of the partition.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param">party: str</em>, <em class="sig-param">region: Optional[str] = None</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.count"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>party</strong> (<em>str</em>) – Party ID.</p></li>
<li><p><strong>region</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – ID of the part of the partition whose votes we want to tally.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The total number of votes that <code class="docutils literal notranslate"><span class="pre">party</span></code> received in a given region
(part of the partition). If <code class="docutils literal notranslate"><span class="pre">region</span></code> is omitted, returns the overall vote
total of <code class="docutils literal notranslate"><span class="pre">party</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">counts</code><span class="sig-paren">(</span><em class="sig-param">party: str</em><span class="sig-paren">)</span> &#x2192; Tuple<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.counts"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> (<em>str</em>) – Party ID</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of the total votes cast for <code class="docutils literal notranslate"><span class="pre">party</span></code> in each part of
the partition</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">efficiency_gap</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.efficiency_gap"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the efficiency gap for this ElectionResults object.</p>
<p>See: <code class="xref py py-func docutils literal notranslate"><span class="pre">efficiency_gap()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The efficiency gap for this election.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">mean_median</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.mean_median"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the mean-median score for this ElectionResults object.</p>
<p>See: <code class="xref py py-func docutils literal notranslate"><span class="pre">mean_median()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The mean-median score for this election.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">mean_thirdian</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.mean_thirdian"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the mean-thirdian score for this ElectionResults object.</p>
<p>See: <code class="xref py py-func docutils literal notranslate"><span class="pre">mean_thirdian()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The mean-thirdian score for this election.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">partisan_bias</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.partisan_bias"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the partisan bias for this ElectionResults object.</p>
<p>See: <code class="xref py py-func docutils literal notranslate"><span class="pre">partisan_bias()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The partisan bias for this election.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">partisan_gini</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.partisan_gini"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the Gini score for this ElectionResults object.</p>
<p>See: <code class="xref py py-func docutils literal notranslate"><span class="pre">partisan_gini()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The partisan Gini score for this election.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">percent</code><span class="sig-paren">(</span><em class="sig-param">party: str</em>, <em class="sig-param">region: Optional[int] = None</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.percent"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>party</strong> (<em>str</em>) – Party ID.</p></li>
<li><p><strong>region</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – ID of the part of the partition whose votes we want to tally.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The percentage of the vote that <code class="docutils literal notranslate"><span class="pre">party</span></code> received in a given region
(part of the partition). If <code class="docutils literal notranslate"><span class="pre">region</span></code> is omitted, returns the overall vote
share of <code class="docutils literal notranslate"><span class="pre">party</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">percents</code><span class="sig-paren">(</span><em class="sig-param">party: str</em><span class="sig-paren">)</span> &#x2192; Tuple<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.percents"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> (<em>str</em>) – Party ID</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tuple of the percentage of votes that <code class="docutils literal notranslate"><span class="pre">party</span></code> received
in each part of the partition</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">seats</code><span class="sig-paren">(</span><em class="sig-param">party: str</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.seats"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> (<em>str</em>) – Party name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of seats that <code class="docutils literal notranslate"><span class="pre">party</span></code> won.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">total_votes</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.total_votes"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The total number of votes cast in the election.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">votes</code><span class="sig-paren">(</span><em class="sig-param">party: str</em><span class="sig-paren">)</span> &#x2192; Tuple<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.votes"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>An alias for <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults.counts" title="gerrychain.updaters.election.ElectionResults.counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">counts()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> (<em>str</em>) – Party ID</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of the total votes cast for <code class="docutils literal notranslate"><span class="pre">party</span></code> in each part of
the partition</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">wins</code><span class="sig-paren">(</span><em class="sig-param">party: str</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.wins"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>An alias for <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults.seats" title="gerrychain.updaters.election.ElectionResults.seats"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seats()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> (<em>str</em>) – Party name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of seats that <code class="docutils literal notranslate"><span class="pre">party</span></code> won.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">won</code><span class="sig-paren">(</span><em class="sig-param">party: str</em>, <em class="sig-param">region: str</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.won"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>party</strong> (<em>str</em>) – Party ID</p></li>
<li><p><strong>region</strong> (<em>str</em>) – ID of the part of the partition whose votes we want to tally.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Answer to “Did <code class="docutils literal notranslate"><span class="pre">party</span></code> win the region in part <code class="docutils literal notranslate"><span class="pre">region</span></code>?”</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">ElectionUpdater</code><span class="sig-paren">(</span><em class="sig-param">election: gerrychain.updaters.election.Election</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionUpdater"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The updater for computing the election results in each part of the partition after
each step in the Markov chain. The actual results are returned to the user as
an <a class="reference internal" href="api.html#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionResults</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#module-gerrychain.updaters.election" title="gerrychain.updaters.election"><strong>election</strong></a> – The <a class="reference internal" href="api.html#gerrychain.updaters.election.Election" title="gerrychain.updaters.election.Election"><code class="xref py py-class docutils literal notranslate"><span class="pre">Election</span></code></a> object that this updater is associated with.</p>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">get_previous_values</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[int, float]]<a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionUpdater.get_previous_values"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition whose parent we want to obtain the
previous vote totals from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping party names to the vote totals that
party received in each part of the parent of the current partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, Dict[int, float]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">format_part_results</code><span class="sig-paren">(</span><em class="sig-param">percents_for_party: Dict[str, Dict[int, float]], part: int</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/gerrychain/updaters/election.html#format_part_results"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>percents_for_party</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em><em>]</em>) – A dictionary mapping party names to a dict
containing the percentage of votes that party received in each part
of the partition.</p></li>
<li><p><strong>part</strong> (<em>int</em>) – The part of the partition whose results we want to format.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A formatted string containing the results for the given part
of the partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">get_percents</code><span class="sig-paren">(</span><em class="sig-param">counts: Dict</em>, <em class="sig-param">totals: Dict</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/updaters/election.html#get_percents"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>counts</strong> (<em>Dict</em>) – A dictionary mapping each part in a partition to the
count of the number of votes that a party received in that part.</p></li>
<li><p><strong>totals</strong> (<em>Dict</em>) – A dictionary mapping each part in a partition to the
total number of votes cast in that part.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each part in a partition to the percentage</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.flows.</code><code class="sig-name descname">compute_edge_flows</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/gerrychain/updaters/flows.html#compute_edge_flows"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A flow dictionary containing the flow from the parent of this partition
to this partition. This dictionary is of the form
<cite>{part: {‘in’: &lt;set of edges that flowed in&gt;, ‘out’: &lt;set of edges that flowed out&gt;}}</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.flows.</code><code class="sig-name descname">create_flow</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/flows.html#create_flow"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.flows.</code><code class="sig-name descname">flows_from_changes</code><a class="reference internal" href="_modules/gerrychain/updaters/flows.html#flows_from_changes"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>old_partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph representing the previous step.</p></li>
<li><p><strong>new_partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph representing the current step.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping each node that changed assignment between
the previous and current partitions to a dictionary of the form
<cite>{‘in’: &lt;set of nodes that flowed in&gt;, ‘out’: &lt;set of nodes that flowed out&gt;}</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.flows.</code><code class="sig-name descname">neighbor_flips</code><a class="reference internal" href="_modules/gerrychain/updaters/flows.html#neighbor_flips"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<a class="reference internal" href="api.html#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a>) – A partition of a Graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The set of edges that were flipped in the given partition.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set[Tuple]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.flows.</code><code class="sig-name descname">on_edge_flow</code><span class="sig-paren">(</span><em class="sig-param">initializer: Callable</em>, <em class="sig-param">alias: str</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="_modules/gerrychain/updaters/flows.html#on_edge_flow"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Use this decorator to create an updater that responds to flows of cut
edges between parts of the partition.</p>
<p>Decorate a function that takes:
- The partition
- The previous value of the updater for a fixed part P_i
- The new cut edges that are just joining P_i at this step
- The old cut edges that are just leaving P_i at this step
and returns:
- The new value of the updater for the fixed part P_i.</p>
<p>This will create an updater whose values are dictionaries of the
form <cite>{part: &lt;value of the given function on the part&gt;}</cite>.</p>
<p>The initializer, by contrast, should take the entire partition and
return the entire <cite>{part: &lt;value&gt;}</cite> dictionary.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@on_edge_flow</span><span class="p">(</span><span class="n">initializer</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;my_updater&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_updater</span><span class="p">(</span><span class="n">partition</span><span class="p">,</span> <span class="n">previous</span><span class="p">,</span> <span class="n">new_edges</span><span class="p">,</span> <span class="n">old_edges</span><span class="p">):</span>
    <span class="c1"># return new value of the part</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initializer</strong> (<em>Callable</em>) – A function that takes the partition and returns a
dictionary of the form <cite>{part: &lt;value&gt;}</cite>.</p></li>
<li><p><strong>alias</strong> (<em>str</em>) – The name of the updater to be created.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A decorator that takes a function as input and returns a
wrapped function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.flows.</code><code class="sig-name descname">on_flow</code><span class="sig-paren">(</span><em class="sig-param">initializer: Callable</em>, <em class="sig-param">alias: str</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="_modules/gerrychain/updaters/flows.html#on_flow"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Use this decorator to create an updater that responds to flows of nodes
between parts of the partition.</p>
<p>Decorate a function that takes:
- The partition
- The previous value of the updater on a fixed part P_i
- The new nodes that are just joining P_i at this step
- The old nodes that are just leaving P_i at this step
and returns:
- The new value of the updater for the fixed part P_i.</p>
<p>This will create an updater whose values are dictionaries of the
form <cite>{part: &lt;value of the given function on the part&gt;}</cite>.</p>
<p>The initializer, by contrast, should take the entire partition and
return the entire <cite>{part: &lt;value&gt;}</cite> dictionary.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@on_flow</span><span class="p">(</span><span class="n">initializer</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;my_updater&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_updater</span><span class="p">(</span><span class="n">partition</span><span class="p">,</span> <span class="n">previous</span><span class="p">,</span> <span class="n">new_nodes</span><span class="p">,</span> <span class="n">old_nodes</span><span class="p">):</span>
    <span class="c1"># return new value for the part</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initializer</strong> (<em>Callable</em>) – A function that takes the partition and returns a
dictionary of the form <cite>{part: &lt;value&gt;}</cite>.</p></li>
<li><p><strong>alias</strong> (<em>str</em>) – The name of the updater to be created.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A decorator that takes a function as input and returns a
wrapped function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Callable</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.locality_split_scores.</code><code class="sig-name descname">LocalitySplits</code><span class="sig-paren">(</span><em class="sig-param">name: str, col_id: str, pop_col: str, scores_to_compute: List[str] = ['num_parts'], pent_alpha: float = 0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes various splitting measures for a partition</p>
<p>Can be used to compute how a districting plan splits
against any static attribute. The prototypical example
is to consider how a districting plan subdivides counties
or municipalities, but other units, such as city
neighborhoods, state legislative districts, or Census
tracts could be treated as ‘localities’</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming your nodes have attributes &quot;countyID&quot;</span>
<span class="c1"># with (for example) the name of the county that</span>
<span class="c1"># node lies in and a population attribute &quot;pop&quot;:</span>
<span class="n">county_splits</span> <span class="o">=</span> <span class="n">LocalitySplits</span><span class="p">(</span>
    <span class="s2">&quot;countysplits&quot;</span><span class="p">,</span>
    <span class="s2">&quot;countyID&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pop&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;num_parts&quot;</span><span class="p">,</span> <span class="s2">&quot;symmetric_entropy&quot;</span><span class="p">,</span><span class="s2">&quot;power_entropy&quot;</span><span class="p">],</span>
    <span class="n">pent_alpha</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="p">)</span>
<span class="c1"># Assuming you already have a graph and assignment:</span>
<span class="n">partition</span> <span class="o">=</span> <span class="n">Partition</span><span class="p">(</span>
    <span class="n">graph</span><span class="p">,</span>
    <span class="n">assignment</span><span class="p">,</span>
    <span class="n">updaters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;county_splits&quot;</span> <span class="p">:</span> <span class="n">county_splits</span><span class="p">}</span>
<span class="p">)</span>
<span class="c1"># The updater returns an dictionary instance, which</span>
<span class="c1"># at each step of the chain has the name of the score</span>
<span class="c1"># and its value at that step</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the updater (e.g. “countysplits”)</p></li>
<li><p><strong>col_id</strong> – The name of the column containing the locality
attribute (i.e. county ids, municipality names, etc.)</p></li>
<li><p><strong>pop_col</strong> – The name of the column containing population counts.</p></li>
<li><p><strong>scores_to_compute</strong> – A list/tuple/set of strings naming the
score functions to compute at each step. This will generally be
some subcollection of <code class="docutils literal notranslate"><span class="pre">`['num_parts',</span> <span class="pre">'num_pieces',</span>
<span class="pre">'naked_boundary',</span> <span class="pre">'shannon_entropy',</span> <span class="pre">'power_entropy',</span>
<span class="pre">'symmetric_entropy',</span> <span class="pre">'num_split_localities']`</span></code></p></li>
<li><p><strong>pent_alpha</strong> – A number between 0 and 1 which is passed as the
exponent to <code class="xref py py-meth docutils literal notranslate"><span class="pre">power_entropy()</span></code></p></li>
<li><p><strong>localities</strong> – A list containing the unique locality identifiers
(e.g. county names, municipality names, etc.) for the partition.
This list is populated using the locality data stored on each of
the nodes in the graph.</p></li>
<li><p><strong>localitydict</strong> – A dictionary mapping node IDs to locality IDs.
This is used to quickly look up the locality of a given node.</p></li>
<li><p><strong>locality_splits</strong> – A dictionary mapping district IDs to a counter
of localities in that district. That is to say, this tells us
how many nodes in each district are of the given locality type.</p></li>
<li><p><strong>locality_splits_inv</strong> – The inverted dictionary of locality_splits</p></li>
<li><p><strong>allowed_pieces</strong> – A dictionary that maps each locality to the
minimum number of districts that locality must touch. This is
computed using the ideal district population. NOT CURRENTLY USED.</p></li>
<li><p><strong>scores</strong> – A dictionary initialized with the key values from the
initializer’s scores_to_compute parameter. The initial values are
set to none and are updated in each call to store the compted
score value for each metric of interest.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the updater (e.g. “countysplits”)</p></li>
<li><p><strong>col_id</strong> (<em>str</em>) – The name of the column containing the locality
attribute (i.e. county ids, municipality names, etc.)</p></li>
<li><p><strong>pop_col</strong> (<em>str</em>) – The name of the column containing population counts.</p></li>
<li><p><strong>scores_to_compute</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – A list/tuple/set of strings naming the
score functions to compute at each step. This should be
some subcollection of <code class="docutils literal notranslate"><span class="pre">`['num_parts',</span> <span class="pre">'num_pieces',</span>
<span class="pre">'naked_boundary',</span> <span class="pre">'shannon_entropy',</span> <span class="pre">'power_entropy',</span>
<span class="pre">'symmetric_entropy',</span> <span class="pre">'num_split_localities']`</span></code>.
Default is [“num_parts”].</p></li>
<li><p><strong>pent_alpha</strong> (<em>float</em><em>, </em><em>optional</em>) – A number between 0 and 1 which is
passed as the exponent to <code class="xref py py-meth docutils literal notranslate"><span class="pre">power_entropy()</span></code>.
Default is 0.05.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">naked_boundary</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.naked_boundary"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="simple">
<dt>Computes the number of cut edges inside localities (i.e. the</dt><dd><p>number of cut edges with both endpoints in the same locality).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of cut edges within a locality.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">num_parts</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.num_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Calculates the number of unique locality-district pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of parts, i.e. the number of unique
locality-district pairs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">num_pieces</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.num_pieces"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Calculates the number of pieces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of pieces, where each piece is formed by
cutting the graph by both locality and district boundaries.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">num_split_localities</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.num_split_localities"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Calculates the number of localities touching 2 or more districts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of split localities, i.e. the number of localities
touching 2 or more districts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">power_entropy</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.power_entropy"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the power entropy score of a district plan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Power entropy score.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">shannon_entropy</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.shannon_entropy"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Computes the shannon entropy score of a district plan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Shannon entropy score.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">symmetric_entropy</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; float<a class="reference internal" href="_modules/gerrychain/updaters/locality_split_scores.html#LocalitySplits.symmetric_entropy"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Calculates the symmetric entropy score.</p>
<p>Warning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">function</span> <span class="ow">is</span> <span class="n">previously</span> <span class="n">marked</span> <span class="n">incomplete</span><span class="o">.</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code>) – The partition to be scored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The symmetric square root entropy score.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>Updaters that compute spanning tree statistics.</p>
<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.spanning_trees.</code><code class="sig-name descname">num_spanning_trees</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span> &#x2192; Dict[int, int]<a class="reference internal" href="_modules/gerrychain/updaters/spanning_trees.html#num_spanning_trees"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of spanning trees in each part (district) of a partition.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[int, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.tally.</code><code class="sig-name descname">DataTally</code><span class="sig-paren">(</span><em class="sig-param">data: Union[Dict, &lt;Mock name='mock.Series' id='139958609001056'&gt;, str], alias: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/tally.html#DataTally"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An updater for tallying numerical data that is not necessarily stored as
node attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – A Dict or Series indexed by the graph’s nodes,
or the string key for a node attribute containing the Tally’s data.</p></li>
<li><p><strong>alias</strong> – The name of the tally in the Partition’s <cite>updaters</cite> dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>data</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>pandas.Series</em><em>, </em><em>str</em><em>]</em>) – A Dict or Series indexed by the graph’s nodes,
or the string key for a node attribute containing the Tally’s data.</p></li>
<li><p><strong>alias</strong> (<em>str</em>) – The name of the tally in the Partition’s <cite>updaters</cite> dictionary</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">alias</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">data</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.tally.</code><code class="sig-name descname">Tally</code><span class="sig-paren">(</span><em class="sig-param">fields: Union[str, List[str]], alias: Optional[str] = None, dtype: Type = &lt;class 'int'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/tally.html#Tally"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An updater for keeping a tally of one or more node attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> – The list of node attributes that you want to tally. Or just a
single attribute name as a string.</p></li>
<li><p><strong>alias</strong> – The aliased name of this Tally (meaning, the key corresponding to
this Tally in the Partition’s updaters dictionary)</p></li>
<li><p><strong>dtype</strong> – The type (int, float, etc.) that you want the tally to have</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>fields</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) – The list of node attributes that you want to tally. Or a just a
single attribute name as a string.</p></li>
<li><p><strong>alias</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – The aliased name of this Tally (meaning, the key corresponding to
this Tally in the Partition’s updaters dictionary).
Default is None.</p></li>
<li><p><strong>dtype</strong> (<em>Any</em><em>, </em><em>optional</em>) – The type (int, float, etc.) that you want the tally to have.
Default is int.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">alias</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">dtype</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">fields</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.tally.</code><code class="sig-name descname">compute_in_flow</code><span class="sig-paren">(</span><em class="sig-param">graph, fields: Union[str, List[str]], flow: Dict</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/tally.html#compute_in_flow"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>) – The graph that the partition is defined on.</p></li>
<li><p><strong>fields</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) – The list of node attributes that you want to tally. Or just a
single attribute name as a string.</p></li>
<li><p><strong>flow</strong> (<em>Dict</em>) – A dictionary containing the flow from the parent of this partition
to this partition. This dictionary is of the form
<cite>{part: {‘in’: &lt;set of nodes that flowed in&gt;, ‘out’: &lt;set of nodes that flowed out&gt;}}</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sum of the “field” attribute of nodes in the “in” set of the flow.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-prename descclassname">gerrychain.updaters.tally.</code><code class="sig-name descname">compute_out_flow</code><span class="sig-paren">(</span><em class="sig-param">graph, fields: Union[str, List[str]], flow: Dict</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/gerrychain/updaters/tally.html#compute_out_flow"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>) – The graph that the partition is defined on.</p></li>
<li><p><strong>fields</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) – The list of node attributes that you want to tally. Or just a
single attribute name as a string.</p></li>
<li><p><strong>flow</strong> (<em>Dict</em>) – A dictionary containing the flow from the parent of this partition
to this partition. This dictionary is of the form
<cite>{part: {‘in’: &lt;set of nodes that flowed in&gt;, ‘out’: &lt;set of nodes that flowed out&gt;}}</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sum of the “field” attribute of nodes in the “out” set of the flow.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="topics/contributing.html" class="btn btn-neutral float-left" title="Contributing to GerryChain" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Metric Geometry and Gerrymandering Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>