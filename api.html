<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API Reference &mdash; GerryChain  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Reproducibility" href="topics/reproducibility.html" />
    <link rel="prev" title="Handling Adjacencies" href="user/adjacency.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #0099cd" >
            <a href="index.html" class="icon icon-home"> GerryChain
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/intro.html">Overview of the Chain</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/quickstart.html">Getting started with GerryChain</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/recom.html">Running a chain with ReCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/partitions.html">Working with Partitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/updaters.html">Updaters</a></li>
<li class="toctree-l1"><a class="reference internal" href="user/adjacency.html">Handling Adjacencies</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adjacency-graphs">Adjacency graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-gerrychain.partition">Partitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#markov-chains">Markov chains</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-gerrychain.proposals">Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-gerrychain.constraints">Binary constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-gerrychain.updaters">Updaters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-gerrychain.updaters.election">Elections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grids">Grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spanning-tree-methods">Spanning tree methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-gerrychain.metrics">Metrics</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="topics/reproducibility.html">Reproducibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/tools.html">Evaluating districting plans in the real world</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/realworldplans.html">Using <code class="docutils literal notranslate"><span class="pre">maup</span></code> to import a real-life plan in GerryChain</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics/whatislands.html">What to do about islands and connectivity</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #0099cd" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GerryChain</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>API Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="module-gerrychain">
<span id="api-reference"></span><h1>API Reference<a class="headerlink" href="#module-gerrychain" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#adjacency-graphs" id="id3">Adjacency graphs</a></p></li>
<li><p><a class="reference internal" href="#module-gerrychain.partition" id="id4">Partitions</a></p></li>
<li><p><a class="reference internal" href="#markov-chains" id="id5">Markov chains</a></p></li>
<li><p><a class="reference internal" href="#module-gerrychain.proposals" id="id6">Proposals</a></p></li>
<li><p><a class="reference internal" href="#module-gerrychain.constraints" id="id7">Binary constraints</a></p></li>
<li><p><a class="reference internal" href="#module-gerrychain.updaters" id="id8">Updaters</a></p></li>
<li><p><a class="reference internal" href="#module-gerrychain.updaters.election" id="id9">Elections</a></p></li>
<li><p><a class="reference internal" href="#grids" id="id10">Grids</a></p></li>
<li><p><a class="reference internal" href="#spanning-tree-methods" id="id11">Spanning tree methods</a></p></li>
<li><p><a class="reference internal" href="#module-gerrychain.metrics" id="id12">Metrics</a></p></li>
</ul>
</div>
<div class="section" id="adjacency-graphs">
<h2><a class="toc-backref" href="#id3">Adjacency graphs</a><a class="headerlink" href="#adjacency-graphs" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gerrychain.graph.graph.Graph">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.graph.graph.</code><code class="sig-name descname">Graph</code><span class="sig-paren">(</span><em class="sig-param">incoming_graph_data=None</em>, <em class="sig-param">**attr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a graph to be partitioned. It is based on <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.Graph</span></code>.</p>
<p>We have added some classmethods to help construct graphs from shapefiles, and
to save and load graphs as JSON files.</p>
<p>Initialize a graph with edges, name, or graph attributes.</p>
<dl class="simple">
<dt>incoming_graph_data<span class="classifier">input graph (optional, default: None)</span></dt><dd><p>Data to initialize graph. If None (default) an empty
graph is created.  The data can be an edge list, or any
NetworkX graph object.  If the corresponding optional Python
packages are installed the data can also be a 2D NumPy array, a
SciPy sparse matrix, or a PyGraphviz graph.</p>
</dd>
<dt>attr<span class="classifier">keyword arguments, optional (default= no attributes)</span></dt><dd><p>Attributes to add to graph as key=value pairs.</p>
</dd>
</dl>
<p>convert</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>  <span class="c1"># or DiGraph, MultiGraph, MultiDiGraph, etc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my graph&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>  <span class="c1"># list of edges</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<p>Arbitrary graph attribute pairs (key=value) may be assigned</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="s2">&quot;Friday&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">graph</span>
<span class="go">{&#39;day&#39;: &#39;Friday&#39;}</span>
</pre></div>
</div>
<dl class="method">
<dt id="gerrychain.graph.graph.Graph.add_data">
<code class="sig-name descname">add_data</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">columns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.add_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.add_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add columns of a DataFrame to a graph as node attributes using
by matching the DataFrame’s index to node ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – Dataframe containing given columns.</p></li>
<li><p><strong>columns</strong> – (optional) List of dataframe column names to add.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">adjacency='rook'</em>, <em class="sig-param">cols_to_add=None</em>, <em class="sig-param">reproject=False</em>, <em class="sig-param">ignore_errors=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a> from a shapefile (or GeoPackage, or GeoJSON, or
any other library that <code class="xref py py-mod docutils literal notranslate"><span class="pre">geopandas</span></code> can read. See <a class="reference internal" href="#gerrychain.graph.graph.Graph.from_geodataframe" title="gerrychain.graph.graph.Graph.from_geodataframe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_geodataframe()</span></code></a>
for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols_to_add</strong> – (optional) The names of the columns that you want to
add to the graph as node attributes. By default, all columns are added.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.from_geodataframe">
<em class="property">classmethod </em><code class="sig-name descname">from_geodataframe</code><span class="sig-paren">(</span><em class="sig-param">dataframe</em>, <em class="sig-param">adjacency='rook'</em>, <em class="sig-param">cols_to_add=None</em>, <em class="sig-param">reproject=False</em>, <em class="sig-param">ignore_errors=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_geodataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.from_geodataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the adjacency <a class="reference internal" href="#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a> of geometries described by <cite>dataframe</cite>.
The areas of the polygons are included as node attributes (with key <cite>area</cite>).
The shared perimeter of neighboring polygons are included as edge attributes
(with key <cite>shared_perim</cite>).
Nodes corresponding to polygons on the boundary of the union of all the geometries
(e.g., the state, if your dataframe describes VTDs) have a <cite>boundary_node</cite> attribute
(set to <cite>True</cite>) and a <cite>boundary_perim</cite> attribute with the length of this “exterior”
boundary.</p>
<p>By default, areas and lengths are computed in a UTM projection suitable for the
geometries. This prevents the bizarro area and perimeter values that show up when
you accidentally do computations in Longitude-Latitude coordinates. If the user
specifies <cite>reproject=False</cite>, then the areas and lengths will be computed in the
GeoDataFrame’s current coordinate reference system. This option is for users who
have a preferred CRS they would like to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataframe</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code></p></li>
<li><p><strong>adjacency</strong> – (optional) The adjacency type to use (“rook” or “queen”).
Default is “rook”</p></li>
<li><p><strong>cols_to_add</strong> – (optional) The names of the columns that you want to
add to the graph as node attributes. By default, all columns are added.</p></li>
<li><p><strong>reproject</strong> – (optional) Whether to reproject to a UTM projection before
creating the graph. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>ignore_errors</strong> – (optional) Whether to ignore all invalid geometries and
attept to create the graph anyway. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The adjacency graph of the geometries from <cite>dataframe</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#gerrychain.graph.graph.Graph" title="gerrychain.graph.graph.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param">json_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a graph from a JSON file in the NetworkX json_graph format.
:param json_file: Path to JSON file.
:return: Graph</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.islands">
<em class="property">property </em><code class="sig-name descname">islands</code><a class="headerlink" href="#gerrychain.graph.graph.Graph.islands" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of degree-0 nodes.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.issue_warnings">
<code class="sig-name descname">issue_warnings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.issue_warnings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.issue_warnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue warnings if the graph has any red flags (right now, only islands).</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.join">
<code class="sig-name descname">join</code><span class="sig-paren">(</span><em class="sig-param">dataframe</em>, <em class="sig-param">columns=None</em>, <em class="sig-param">left_index=None</em>, <em class="sig-param">right_index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Add data from a dataframe to the graph, matching nodes to rows when
the node’s <cite>left_index</cite> attribute equals the row’s <cite>right_index</cite> value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataframe</strong> – DataFrame.</p>
</dd>
<dt class="field-even">Columns</dt>
<dd class="field-even"><p>(optional) The columns whose data you wish to add to the graph.
If not provided, all columns are added.</p>
</dd>
<dt class="field-odd">Left_index</dt>
<dd class="field-odd"><p>(optional) The node attribute used to match nodes to rows.
If not provided, node IDs are used.</p>
</dd>
<dt class="field-even">Right_index</dt>
<dd class="field-even"><p>(optional) The DataFrame column name to use to match rows
to nodes. If not provided, the DataFrame’s index is used.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.lookup">
<code class="sig-name descname">lookup</code><span class="sig-paren">(</span><em class="sig-param">node</em>, <em class="sig-param">field</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup a node/field attribute.
:param node: Node to look up.
:param field: Field to look up.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">json_file</em>, <em class="sig-param">*</em>, <em class="sig-param">include_geometries_as_geojson=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a graph to a JSON file in the NetworkX json_graph format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_file</strong> – Path to target JSON file.</p></li>
<li><p><strong>include_geometry_as_geojson</strong> (<em>bool</em>) – (optional) Whether to include
any <code class="xref py py-mod docutils literal notranslate"><span class="pre">shapely</span></code> geometry objects encountered in the graph’s node
attributes as GeoJSON. The default (<code class="docutils literal notranslate"><span class="pre">False</span></code>) behavior is to remove
all geometry objects because they are not serializable. Including the
GeoJSON will result in a much larger JSON file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.graph.graph.Graph.warn_for_islands">
<code class="sig-name descname">warn_for_islands</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/graph/graph.html#Graph.warn_for_islands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.graph.graph.Graph.warn_for_islands" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning if the graph has any islands (degree-0 nodes).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gerrychain.partition">
<span id="partitions"></span><h2><a class="toc-backref" href="#id4">Partitions</a><a class="headerlink" href="#module-gerrychain.partition" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gerrychain.partition.Partition">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.partition.</code><code class="sig-name descname">Partition</code><span class="sig-paren">(</span><em class="sig-param">graph=None</em>, <em class="sig-param">assignment=None</em>, <em class="sig-param">updaters=None</em>, <em class="sig-param">parent=None</em>, <em class="sig-param">flips=None</em>, <em class="sig-param">use_default_updaters=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.partition.Partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Partition represents a partition of the nodes of the graph. It will perform
the first layer of computations at each step in the Markov chain - basic
aggregations and calculations that we want to optimize.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<em>gerrychain.Graph</em>) – The underlying graph.</p></li>
<li><p><strong>assignment</strong> (<em>gerrychain.Assignment</em>) – Maps node IDs to district IDs.</p></li>
<li><p><strong>parts</strong> (<em>dict</em>) – Maps district IDs to the set of nodes in that district.</p></li>
<li><p><strong>subgraphs</strong> (<em>dict</em>) – Maps district IDs to the induced subgraph of that district.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>graph</strong> – Underlying graph.</p></li>
<li><p><strong>assignment</strong> – Dictionary assigning nodes to districts.</p></li>
<li><p><strong>updaters</strong> – Dictionary of functions to track data about the partition.
The keys are stored as attributes on the partition class,
which the functions compute.</p></li>
<li><p><strong>use_default_updaters</strong> – If <cite>False</cite>, do not include default updaters.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gerrychain.partition.Partition.crosses_parts">
<code class="sig-name descname">crosses_parts</code><span class="sig-paren">(</span><em class="sig-param">edge</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.crosses_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.partition.Partition.crosses_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Answers the question “Does this edge cross from one part of the
partition to another?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>edge</strong> – tuple of node IDs</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.partition.Partition.flip">
<code class="sig-name descname">flip</code><span class="sig-paren">(</span><em class="sig-param">flips</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.flip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.partition.Partition.flip" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the new partition obtained by performing the given <cite>flips</cite>
on this partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flips</strong> – dictionary assigning nodes of the graph to their new districts</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the new <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition">Partition</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.partition.Partition.from_districtr_file">
<em class="property">classmethod </em><code class="sig-name descname">from_districtr_file</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">districtr_file</em>, <em class="sig-param">updaters=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.from_districtr_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.partition.Partition.from_districtr_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Partition from a districting plan created with <a class="reference external" href="https://mggg.org/Districtr">Districtr</a>,
a free and open-source web app created by MGGG for drawing districts.</p>
<p>The provided <code class="docutils literal notranslate"><span class="pre">graph</span></code> should be created from the same shapefile as the
Districtr module used to draw the districting plan. These shapefiles may
be found in a repository in the <a class="reference external" href="https://github.com/mggg-states">mggg-states</a> GitHub organization, or by
request from MGGG.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></p></li>
<li><p><strong>districtr_file</strong> – the path to the <code class="docutils literal notranslate"><span class="pre">.json</span></code> file exported from Districtr</p></li>
<li><p><strong>updaters</strong> – dictionary of updaters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.partition.Partition.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">geometries=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/partition.html#Partition.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.partition.Partition.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the partition, using the provided geometries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometries</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.GeoSeries</span></code>
holding the geometries to use for plotting. Its <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> should match
the node labels of the partition’s underlying <code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – Additional arguments to pass to <code class="xref py py-meth docutils literal notranslate"><span class="pre">geopandas.GeoDataFrame.plot()</span></code>
to adjust the plot.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gerrychain.partition.GeographicPartition">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.partition.</code><code class="sig-name descname">GeographicPartition</code><span class="sig-paren">(</span><em class="sig-param">graph=None</em>, <em class="sig-param">assignment=None</em>, <em class="sig-param">updaters=None</em>, <em class="sig-param">parent=None</em>, <em class="sig-param">flips=None</em>, <em class="sig-param">use_default_updaters=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/partition/geographic.html#GeographicPartition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.partition.GeographicPartition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gerrychain.partition.partition.Partition</span></code></p>
<p>A <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a> with areas, perimeters, and boundary information included.
These additional data allow you to compute compactness scores like
<a class="reference external" href="https://en.wikipedia.org/wiki/Polsby-Popper_Test">Polsby-Popper</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – Underlying graph.</p></li>
<li><p><strong>assignment</strong> – Dictionary assigning nodes to districts.</p></li>
<li><p><strong>updaters</strong> – Dictionary of functions to track data about the partition.
The keys are stored as attributes on the partition class,
which the functions compute.</p></li>
<li><p><strong>use_default_updaters</strong> – If <cite>False</cite>, do not include default updaters.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="markov-chains">
<h2><a class="toc-backref" href="#id5">Markov chains</a><a class="headerlink" href="#markov-chains" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gerrychain.MarkovChain">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.</code><code class="sig-name descname">MarkovChain</code><span class="sig-paren">(</span><em class="sig-param">proposal</em>, <em class="sig-param">constraints</em>, <em class="sig-param">accept</em>, <em class="sig-param">initial_state</em>, <em class="sig-param">total_steps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/chain.html#MarkovChain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.MarkovChain" title="Permalink to this definition">¶</a></dt>
<dd><p>MarkovChain is an iterator that allows the user to iterate over the states
of a Markov chain run.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
    <span class="c1"># Do whatever you want - print output, compute scores, ...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proposal</strong> – Function proposing the next state from the current state.</p></li>
<li><p><strong>constraints</strong> – A function with signature <code class="docutils literal notranslate"><span class="pre">Partition</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code> determining whether
the proposed next state is valid (passes all binary constraints). Usually
this is a <a class="reference internal" href="#gerrychain.constraints.Validator" title="gerrychain.constraints.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Validator</span></code></a> class instance.</p></li>
<li><p><strong>accept</strong> – Function accepting or rejecting the proposed state. In the most basic
use case, this always returns <code class="docutils literal notranslate"><span class="pre">True</span></code>. But if the user wanted to use a
Metropolis-Hastings acceptance rule, this is where you would implement it.</p></li>
<li><p><strong>initial_state</strong> – Initial <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">gerrychain.partition.Partition</span></code></a> class.</p></li>
<li><p><strong>total_steps</strong> – Number of steps to run.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gerrychain.proposals">
<span id="proposals"></span><h2><a class="toc-backref" href="#id6">Proposals</a><a class="headerlink" href="#module-gerrychain.proposals" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="gerrychain.proposals.recom">
<code class="sig-prename descclassname">gerrychain.proposals.</code><code class="sig-name descname">recom</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">method=&lt;function bipartition_tree&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#recom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.proposals.recom" title="Permalink to this definition">¶</a></dt>
<dd><p>ReCom proposal.</p>
<p>Description from MGGG’s 2018 Virginia House of Delegates report:
At each step, we (uniformly) randomly select a pair of adjacent districts and
merge all of their blocks in to a single unit. Then, we generate a spanning tree
for the blocks of the merged unit with the Kruskal/Karger algorithm. Finally,
we cut an edge of the tree at random, checking that this separates the region
into two new districts that are population balanced.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">gerrychain</span> <span class="kn">import</span> <span class="n">MarkovChain</span>
<span class="kn">from</span> <span class="nn">gerrychain.proposals</span> <span class="kn">import</span> <span class="n">recom</span>

<span class="c1"># ...define constraints, accept, partition, total_steps here...</span>

<span class="c1"># Ideal population:</span>
<span class="n">pop_target</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="s2">&quot;population&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span>

<span class="n">proposal</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">recom</span><span class="p">,</span> <span class="n">pop_col</span><span class="o">=</span><span class="s2">&quot;POP10&quot;</span><span class="p">,</span> <span class="n">pop_target</span><span class="o">=</span><span class="n">pop_target</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">node_repeats</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">partition</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gerrychain.proposals.reversible_recom">
<code class="sig-prename descclassname">gerrychain.proposals.</code><code class="sig-name descname">reversible_recom</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">balance_edge_fn=&lt;function find_balanced_edge_cuts_memoization&gt;</em>, <em class="sig-param">M=1</em>, <em class="sig-param">repeat_until_valid=False</em>, <em class="sig-param">choice=&lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/tree_proposals.html#reversible_recom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.proposals.reversible_recom" title="Permalink to this definition">¶</a></dt>
<dd><p>Reversible ReCom proposal.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.proposals.spectral_recom">
<code class="sig-prename descclassname">gerrychain.proposals.</code><code class="sig-name descname">spectral_recom</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">weight_type=None</em>, <em class="sig-param">lap_type='normalized'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/spectral_proposals.html#spectral_recom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.proposals.spectral_recom" title="Permalink to this definition">¶</a></dt>
<dd><p>Spectral ReCom proposal.</p>
<p>Uses spectral clustering to bipartition a subgraph of the original graph
formed by merging the nodes corresponding to two adjacent districts.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">gerrychain</span> <span class="kn">import</span> <span class="n">MarkovChain</span>
<span class="kn">from</span> <span class="nn">gerrychain.proposals</span> <span class="kn">import</span> <span class="n">recom</span>

<span class="c1"># ...define constraints, accept, partition, total_steps here...</span>


<span class="n">proposal</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">spectral_recom</span><span class="p">,</span> <span class="n">weight_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lap_type</span><span class="o">=</span><span class="s2">&quot;normalized&quot;</span>
<span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">partition</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gerrychain.proposals.propose_chunk_flip">
<code class="sig-prename descclassname">gerrychain.proposals.</code><code class="sig-name descname">propose_chunk_flip</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#propose_chunk_flip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.proposals.propose_chunk_flip" title="Permalink to this definition">¶</a></dt>
<dd><p>Chooses a random boundary node and proposes to flip it and all of its neighbors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a proposed next <cite>~gerrychain.Partition</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.proposals.propose_random_flip">
<code class="sig-prename descclassname">gerrychain.proposals.</code><code class="sig-name descname">propose_random_flip</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/proposals/proposals.html#propose_random_flip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.proposals.propose_random_flip" title="Permalink to this definition">¶</a></dt>
<dd><p>Proposes a random boundary flip from the partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> – The current partition to propose a flip from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a proposed next <cite>~gerrychain.Partition</cite></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gerrychain.constraints">
<span id="binary-constraints"></span><h2><a class="toc-backref" href="#id7">Binary constraints</a><a class="headerlink" href="#module-gerrychain.constraints" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#module-gerrychain.constraints" title="gerrychain.constraints"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gerrychain.constraints</span></code></a> module provides a collection of constraint
functions and helper classes for the validation step in GerryChain.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Helper classes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#gerrychain.constraints.Validator" title="gerrychain.constraints.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Validator</span></code></a></p></td>
<td><p>Collection of constraints</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gerrychain.constraints.Bounds" title="gerrychain.constraints.Bounds"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bounds</span></code></a></p></td>
<td><p>Bounds on numeric constraints</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gerrychain.constraints.UpperBound" title="gerrychain.constraints.UpperBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpperBound</span></code></a></p></td>
<td><p>Upper bounds on numeric constraints</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gerrychain.constraints.LowerBound" title="gerrychain.constraints.LowerBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">LowerBound</span></code></a></p></td>
<td><p>Lower bounds on numeric constraints</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gerrychain.constraints.SelfConfiguringUpperBound" title="gerrychain.constraints.SelfConfiguringUpperBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelfConfiguringUpperBound</span></code></a></p></td>
<td><p>Automatic upper bounds on numeric constraints</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gerrychain.constraints.SelfConfiguringLowerBound" title="gerrychain.constraints.SelfConfiguringLowerBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelfConfiguringLowerBound</span></code></a></p></td>
<td><p>Automatic lower bounds on numeric constraints</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gerrychain.constraints.WithinPercentRangeOfBounds" title="gerrychain.constraints.WithinPercentRangeOfBounds"><code class="xref py py-class docutils literal notranslate"><span class="pre">WithinPercentRangeOfBounds</span></code></a></p></td>
<td><p>Percentage bounds for numeric constraints</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Binary constraint functions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">no_worse_L1_reciprocal_polsby_popper()</span></code></p></td>
<td><p>Lower bounded L1-reciprocal Polsby-Popper</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">no_worse_L_minus_1_reciprocal_polsby_popper()</span></code></p></td>
<td><p>Lower bounded L(-1)-reciprocal Polsby-Popper</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gerrychain.constraints.contiguous" title="gerrychain.constraints.contiguous"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contiguous()</span></code></a></p></td>
<td><p>Districts are contiguous (with NetworkX methods)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gerrychain.constraints.single_flip_contiguous" title="gerrychain.constraints.single_flip_contiguous"><code class="xref py py-meth docutils literal notranslate"><span class="pre">single_flip_contiguous()</span></code></a></p></td>
<td><p>Districts are contiguous (optimized for <code class="docutils literal notranslate"><span class="pre">propose_random_flip</span></code> proposal)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gerrychain.constraints.no_vanishing_districts" title="gerrychain.constraints.no_vanishing_districts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">no_vanishing_districts()</span></code></a></p></td>
<td><p>No districts may be completely consumed</p></td>
</tr>
</tbody>
</table>
<p>Each new step proposed to the chain is passed off to the “validator” functions
here to determine whether or not the step is valid. If it is invalid (breaks
contiguity, for instance), then the step is immediately rejected.</p>
<p>A validator should take in a <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a> instance,
and should return whether or not the instance is valid according to their
rules. Many top-level functions following this signature in this module are
examples of this.</p>
<dl class="class">
<dt id="gerrychain.constraints.LowerBound">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">LowerBound</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">bound</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#LowerBound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.LowerBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for numeric-validators to enforce lower limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set lower limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function. Should return a comparable value.</p></li>
<li><p><strong>bounds</strong> – Comparable lower bound.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.constraints.SelfConfiguringLowerBound">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">SelfConfiguringLowerBound</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">epsilon=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#SelfConfiguringLowerBound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.SelfConfiguringLowerBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for numeric-validators to enforce automatic lower limits.</p>
<p>When instantiated, the initial lower bound is set as the initial value of
the numeric-validator minus some configurable ε.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set lower limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function.</p></li>
<li><p><strong>epsilon</strong> – Initial “wiggle room” that the validator allows.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.constraints.SelfConfiguringUpperBound">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">SelfConfiguringUpperBound</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#SelfConfiguringUpperBound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.SelfConfiguringUpperBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for numeric-validators to enforce automatic upper limits.</p>
<p>When instantiated, the initial upper bound is set as the initial value of
the numeric-validator.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set upper limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> – Numeric validator function.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.constraints.UpperBound">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">UpperBound</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">bound</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#UpperBound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.UpperBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for numeric-validators to enforce upper limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set upper limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function. Should return a comparable value.</p></li>
<li><p><strong>bounds</strong> – Comparable upper bound.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.contiguous">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">contiguous</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#contiguous"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.contiguous" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the parts of a partition are connected using <code class="xref py py-func docutils literal notranslate"><span class="pre">networkx.is_connected()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> – The proposed next <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether the partition is contiguous</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.contiguous_bfs">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">contiguous_bfs</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#contiguous_bfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.contiguous_bfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that a given partition’s parts are connected as graphs using a simple
breadth-first search.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> – Instance of Partition</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the parts of this partition are connected</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.single_flip_contiguous">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">single_flip_contiguous</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/contiguity.html#single_flip_contiguous"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.single_flip_contiguous" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if swapping the given node from its old assignment disconnects the
old assignment class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> – The proposed next <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether the partition is contiguous</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p>We assume that <cite>removed_node</cite> belonged to an assignment class that formed a
connected subgraph. To see if its removal left the subgraph connected, we
check that the neighbors of the removed node are still connected through
the changed graph.</p>
</dd></dl>

<dl class="class">
<dt id="gerrychain.constraints.Validator">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">Validator</code><span class="sig-paren">(</span><em class="sig-param">constraints</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#Validator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>A single callable for checking that a partition passes a collection of
constraints. Intended to be passed as the <code class="docutils literal notranslate"><span class="pre">is_valid</span></code> parameter when
instantiating <a class="reference internal" href="#gerrychain.MarkovChain" title="gerrychain.MarkovChain"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkovChain</span></code></a>.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if all validators pass, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if any one fails.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">is_valid</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">([</span><span class="n">constraint1</span><span class="p">,</span> <span class="n">constraint2</span><span class="p">,</span> <span class="n">constraint3</span><span class="p">])</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">is_valid</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraints</strong> – List of validator functions that will check partitions.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.districts_within_tolerance">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">districts_within_tolerance</code><span class="sig-paren">(</span><em class="sig-param">partition</em>, <em class="sig-param">attribute_name='population'</em>, <em class="sig-param">percentage=0.1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#districts_within_tolerance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.districts_within_tolerance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if all districts are within a certain percentage of the “smallest”
district, as defined by the given attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition</strong> – partition class instance</p></li>
<li><p><strong>attrName</strong> – string that is the name of an updater in partition</p></li>
<li><p><strong>percentage</strong> – what percent difference is allowed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether the districts are within specified tolerance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.no_vanishing_districts">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">no_vanishing_districts</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#no_vanishing_districts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.no_vanishing_districts" title="Permalink to this definition">¶</a></dt>
<dd><p>Require that no districts be completely consumed.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.refuse_new_splits">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">refuse_new_splits</code><span class="sig-paren">(</span><em class="sig-param">partition_county_field</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#refuse_new_splits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.refuse_new_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Refuse all proposals that split a county that was previous unsplit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition_county_field</strong> – Name of field for county information generated by
<a class="reference internal" href="#gerrychain.updaters.county_splits" title="gerrychain.updaters.county_splits"><code class="xref py py-func docutils literal notranslate"><span class="pre">county_splits()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.constraints.within_percent_of_ideal_population">
<code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">within_percent_of_ideal_population</code><span class="sig-paren">(</span><em class="sig-param">initial_partition</em>, <em class="sig-param">percent=0.01</em>, <em class="sig-param">pop_key='population'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#within_percent_of_ideal_population"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.within_percent_of_ideal_population" title="Permalink to this definition">¶</a></dt>
<dd><p>Require that all districts are within a certain percent of “ideal” (i.e.,
uniform) population.</p>
<p>Ideal population is defined as “total population / number of districts.”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_partition</strong> – Starting partition from which to compute district information.</p></li>
<li><p><strong>percent</strong> – (optional) Allowed percentage deviation. Default is 1%.</p></li>
<li><p><strong>pop_key</strong> – (optional) The name of the population
<a class="reference internal" href="#gerrychain.updaters.Tally" title="gerrychain.updaters.Tally"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tally</span></code></a>. Default is <code class="docutils literal notranslate"><span class="pre">&quot;population&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#gerrychain.constraints.Bounds" title="gerrychain.constraints.Bounds"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bounds</span></code></a> constraint on the population attribute identified
by <code class="docutils literal notranslate"><span class="pre">pop_key</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.constraints.Bounds">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">Bounds</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">bounds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#Bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.Bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for numeric-validators to enforce upper and lower limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within set limits, and
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function. Should return an iterable of values.</p></li>
<li><p><strong>bounds</strong> – Tuple of (lower, upper) numeric bounds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">Validator</code><span class="sig-paren">(</span><em class="sig-param">constraints</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/validity.html#Validator"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A single callable for checking that a partition passes a collection of
constraints. Intended to be passed as the <code class="docutils literal notranslate"><span class="pre">is_valid</span></code> parameter when
instantiating <a class="reference internal" href="#gerrychain.MarkovChain" title="gerrychain.MarkovChain"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkovChain</span></code></a>.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if all validators pass, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if any one fails.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">is_valid</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">([</span><span class="n">constraint1</span><span class="p">,</span> <span class="n">constraint2</span><span class="p">,</span> <span class="n">constraint3</span><span class="p">])</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">MarkovChain</span><span class="p">(</span><span class="n">proposal</span><span class="p">,</span> <span class="n">is_valid</span><span class="p">,</span> <span class="n">accept</span><span class="p">,</span> <span class="n">initial_state</span><span class="p">,</span> <span class="n">total_steps</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constraints</strong> – List of validator functions that will check partitions.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">UpperBound</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">bound</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#UpperBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Wrapper for numeric-validators to enforce upper limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set upper limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function. Should return a comparable value.</p></li>
<li><p><strong>bounds</strong> – Comparable upper bound.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">LowerBound</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">bound</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#LowerBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Wrapper for numeric-validators to enforce lower limits.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set lower limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function. Should return a comparable value.</p></li>
<li><p><strong>bounds</strong> – Comparable lower bound.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">SelfConfiguringLowerBound</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">epsilon=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#SelfConfiguringLowerBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Wrapper for numeric-validators to enforce automatic lower limits.</p>
<p>When instantiated, the initial lower bound is set as the initial value of
the numeric-validator minus some configurable ε.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set lower limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – Numeric validator function.</p></li>
<li><p><strong>epsilon</strong> – Initial “wiggle room” that the validator allows.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">SelfConfiguringUpperBound</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#SelfConfiguringUpperBound"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Wrapper for numeric-validators to enforce automatic upper limits.</p>
<p>When instantiated, the initial upper bound is set as the initial value of
the numeric-validator.</p>
<p>This class is meant to be called as a function after instantiation; its
return is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the numeric validator is within a set upper limit,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> – Numeric validator function.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.constraints.WithinPercentRangeOfBounds">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.constraints.</code><code class="sig-name descname">WithinPercentRangeOfBounds</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">percent</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/constraints/bounds.html#WithinPercentRangeOfBounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.constraints.WithinPercentRangeOfBounds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-gerrychain.updaters">
<span id="updaters"></span><h2><a class="toc-backref" href="#id8">Updaters</a><a class="headerlink" href="#module-gerrychain.updaters" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="gerrychain.updaters.county_splits">
<code class="sig-prename descclassname">gerrychain.updaters.</code><code class="sig-name descname">county_splits</code><span class="sig-paren">(</span><em class="sig-param">partition_name</em>, <em class="sig-param">county_field_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#county_splits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.county_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Track county splits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition_name</strong> – Name that the <a class="reference internal" href="#gerrychain.partition.Partition" title="gerrychain.partition.Partition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partition</span></code></a> instance will store.</p></li>
<li><p><strong>county_field_name</strong> – Name of county ID field on the graph.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tracked data is a dictionary keyed on the county ID. The
stored values are tuples of the form <cite>(split, nodes, seen)</cite>.
<cite>split</cite> is a <a class="reference internal" href="#gerrychain.updaters.CountySplit" title="gerrychain.updaters.CountySplit"><code class="xref py py-class docutils literal notranslate"><span class="pre">CountySplit</span></code></a> enum, <cite>nodes</cite> is a list of
node IDs, and <cite>seen</cite> is a list of assignment IDs that are
contained in the county.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.updaters.Tally">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.</code><code class="sig-name descname">Tally</code><span class="sig-paren">(</span><em class="sig-param">fields</em>, <em class="sig-param">alias=None</em>, <em class="sig-param">dtype=&lt;class 'int'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/tally.html#Tally"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.Tally" title="Permalink to this definition">¶</a></dt>
<dd><p>An updater for keeping a tally of one or more node attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> – the list of node attributes that you want to tally. Or a just a
single attribute name as a string.</p></li>
<li><p><strong>alias</strong> – the aliased name of this Tally (meaning, the key corresponding to
this Tally in the Partition’s updaters dictionary)</p></li>
<li><p><strong>dtype</strong> – the type (int, float, etc.) that you want the tally to have</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.updaters.DataTally">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.</code><code class="sig-name descname">DataTally</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">alias</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/tally.html#DataTally"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.DataTally" title="Permalink to this definition">¶</a></dt>
<dd><p>An updater for tallying numerical data that is not necessarily stored as
node attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – a dict or Series indexed by the graph’s nodes,
or the string key for a node attribute containing the Tally’s data.</p></li>
<li><p><strong>alias</strong> – the name of the tally in the Partition’s <cite>updaters</cite> dictionary</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.updaters.CountySplit">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.</code><code class="sig-name descname">CountySplit</code><a class="reference internal" href="_modules/gerrychain/updaters/county_splits.html#CountySplit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.CountySplit" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

<dl class="class">
<dt id="gerrychain.updaters.Election">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.</code><code class="sig-name descname">Election</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">parties_to_columns</em>, <em class="sig-param">alias=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#Election"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.Election" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the data of one election, with races conducted in each part of
the partition.</p>
<p>As we vary the districting plan, we can use the same node-level vote totals
to tabulate hypothetical elections. To do this manually with tallies, we would
have to maintain tallies for each party, as well as the total number of votes,
and then compute the electoral results and percentages from scratch every time.
To make this simpler, this class provides an <code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionUpdater</span></code> to manage
these tallies. The updater returns an <code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionResults</span></code> class giving
a convenient view of the election results, with methods like
<code class="xref py py-meth docutils literal notranslate"><span class="pre">wins()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">percent()</span></code> for common queries
the user might make on election results.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming your nodes have attributes &quot;2008_D&quot;, &quot;2008_R&quot;</span>
<span class="c1"># with (for example) 2008 senate election vote totals</span>
<span class="n">election</span> <span class="o">=</span> <span class="n">Election</span><span class="p">(</span>
    <span class="s2">&quot;2008 Senate&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;Democratic&quot;</span><span class="p">:</span> <span class="s2">&quot;2008_D&quot;</span><span class="p">,</span> <span class="s2">&quot;Republican&quot;</span><span class="p">:</span> <span class="s2">&quot;2008_R&quot;</span><span class="p">},</span>
    <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;2008_Sen&quot;</span>
<span class="p">)</span>

<span class="c1"># Assuming you already have a graph and assignment:</span>
<span class="n">partition</span> <span class="o">=</span> <span class="n">Partition</span><span class="p">(</span>
    <span class="n">graph</span><span class="p">,</span>
    <span class="n">assignment</span><span class="p">,</span>
    <span class="n">updaters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;2008_Sen&quot;</span><span class="p">:</span> <span class="n">election</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># The updater returns an ElectionResults instance, which</span>
<span class="c1"># we can use (for example) to see how many seats a given</span>
<span class="c1"># party would win in this partition using this election&#39;s</span>
<span class="c1"># vote distribution:</span>
<span class="n">partition</span><span class="p">[</span><span class="s2">&quot;2008_Sen&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wins</span><span class="p">(</span><span class="s2">&quot;Republican&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the election. (e.g. “2008 Presidential”)</p></li>
<li><p><strong>parties_to_columns</strong> – A dictionary matching party names to their
data columns, either as actual columns (list-like, indexed by nodes)
or as string keys for the node attributes that hold the party’s
vote totals. Or, a list of strings which will serve as both
the party names and the node attribute keys.</p></li>
<li><p><strong>alias</strong> – (optional) Alias that the election is registered under
in the Partition’s dictionary of updaters.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.updaters.num_spanning_trees">
<code class="sig-prename descclassname">gerrychain.updaters.</code><code class="sig-name descname">num_spanning_trees</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/spanning_trees.html#num_spanning_trees"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.num_spanning_trees" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of spanning trees in each part (district) of a partition.</p>
</dd></dl>

</div>
<div class="section" id="module-gerrychain.updaters.election">
<span id="elections"></span><h2><a class="toc-backref" href="#id9">Elections</a><a class="headerlink" href="#module-gerrychain.updaters.election" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gerrychain.updaters.election.Election">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">Election</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">parties_to_columns</em>, <em class="sig-param">alias=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#Election"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.Election" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the data of one election, with races conducted in each part of
the partition.</p>
<p>As we vary the districting plan, we can use the same node-level vote totals
to tabulate hypothetical elections. To do this manually with tallies, we would
have to maintain tallies for each party, as well as the total number of votes,
and then compute the electoral results and percentages from scratch every time.
To make this simpler, this class provides an <a class="reference internal" href="#gerrychain.updaters.election.ElectionUpdater" title="gerrychain.updaters.election.ElectionUpdater"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionUpdater</span></code></a> to manage
these tallies. The updater returns an <a class="reference internal" href="#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionResults</span></code></a> class giving
a convenient view of the election results, with methods like
<a class="reference internal" href="#gerrychain.updaters.election.ElectionResults.wins" title="gerrychain.updaters.election.ElectionResults.wins"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wins()</span></code></a> or <a class="reference internal" href="#gerrychain.updaters.election.ElectionResults.percent" title="gerrychain.updaters.election.ElectionResults.percent"><code class="xref py py-meth docutils literal notranslate"><span class="pre">percent()</span></code></a> for common queries
the user might make on election results.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming your nodes have attributes &quot;2008_D&quot;, &quot;2008_R&quot;</span>
<span class="c1"># with (for example) 2008 senate election vote totals</span>
<span class="n">election</span> <span class="o">=</span> <span class="n">Election</span><span class="p">(</span>
    <span class="s2">&quot;2008 Senate&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;Democratic&quot;</span><span class="p">:</span> <span class="s2">&quot;2008_D&quot;</span><span class="p">,</span> <span class="s2">&quot;Republican&quot;</span><span class="p">:</span> <span class="s2">&quot;2008_R&quot;</span><span class="p">},</span>
    <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;2008_Sen&quot;</span>
<span class="p">)</span>

<span class="c1"># Assuming you already have a graph and assignment:</span>
<span class="n">partition</span> <span class="o">=</span> <span class="n">Partition</span><span class="p">(</span>
    <span class="n">graph</span><span class="p">,</span>
    <span class="n">assignment</span><span class="p">,</span>
    <span class="n">updaters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;2008_Sen&quot;</span><span class="p">:</span> <span class="n">election</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># The updater returns an ElectionResults instance, which</span>
<span class="c1"># we can use (for example) to see how many seats a given</span>
<span class="c1"># party would win in this partition using this election&#39;s</span>
<span class="c1"># vote distribution:</span>
<span class="n">partition</span><span class="p">[</span><span class="s2">&quot;2008_Sen&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wins</span><span class="p">(</span><span class="s2">&quot;Republican&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the election. (e.g. “2008 Presidential”)</p></li>
<li><p><strong>parties_to_columns</strong> – A dictionary matching party names to their
data columns, either as actual columns (list-like, indexed by nodes)
or as string keys for the node attributes that hold the party’s
vote totals. Or, a list of strings which will serve as both
the party names and the node attribute keys.</p></li>
<li><p><strong>alias</strong> – (optional) Alias that the election is registered under
in the Partition’s dictionary of updaters.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="gerrychain.updaters.election.ElectionResults">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">ElectionResults</code><span class="sig-paren">(</span><em class="sig-param">election</em>, <em class="sig-param">counts</em>, <em class="sig-param">races</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the results of an election. Provides helpful methods to answer
common questions you might have about an election (Who won? How many seats?, etc.).</p>
<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param">party</em>, <em class="sig-param">race=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of votes that <code class="docutils literal notranslate"><span class="pre">party</span></code> received in a given race
(part of the partition). If <code class="docutils literal notranslate"><span class="pre">race</span></code> is omitted, returns the overall vote
total of <code class="docutils literal notranslate"><span class="pre">party</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>party</strong> – Party ID.</p></li>
<li><p><strong>race</strong> – ID of the part of the partition whose votes we want to tally.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.counts">
<code class="sig-name descname">counts</code><span class="sig-paren">(</span><em class="sig-param">party</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.counts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.counts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> – Party ID</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of the total votes cast for <code class="docutils literal notranslate"><span class="pre">party</span></code> in each part of
the partition</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.efficiency_gap">
<code class="sig-name descname">efficiency_gap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.efficiency_gap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.efficiency_gap" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the efficiency gap for this ElectionResults object.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.mean_median">
<code class="sig-name descname">mean_median</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.mean_median"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.mean_median" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the mean-median score for this ElectionResults object.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.mean_thirdian">
<code class="sig-name descname">mean_thirdian</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.mean_thirdian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.mean_thirdian" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the mean-thirdian score for this ElectionResults object.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.partisan_bias">
<code class="sig-name descname">partisan_bias</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.partisan_bias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.partisan_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the partisan bias for this ElectionResults object.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.partisan_gini">
<code class="sig-name descname">partisan_gini</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.partisan_gini"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.partisan_gini" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the Gini score for this ElectionResults object.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.percent">
<code class="sig-name descname">percent</code><span class="sig-paren">(</span><em class="sig-param">party</em>, <em class="sig-param">race=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.percent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the percentage of the vote that <code class="docutils literal notranslate"><span class="pre">party</span></code> received in a given race
(part of the partition). If <code class="docutils literal notranslate"><span class="pre">race</span></code> is omitted, returns the overall vote
share of <code class="docutils literal notranslate"><span class="pre">party</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>party</strong> – Party ID.</p></li>
<li><p><strong>race</strong> – ID of the part of the partition whose votes we want to tally.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.percents">
<code class="sig-name descname">percents</code><span class="sig-paren">(</span><em class="sig-param">party</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.percents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.percents" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>party</strong> – The party</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tuple of the percentage of votes that <code class="docutils literal notranslate"><span class="pre">party</span></code> received
in each part of the partition</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.seats">
<code class="sig-name descname">seats</code><span class="sig-paren">(</span><em class="sig-param">party</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.seats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.seats" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of races that <code class="docutils literal notranslate"><span class="pre">party</span></code> won.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.votes">
<code class="sig-name descname">votes</code><span class="sig-paren">(</span><em class="sig-param">party</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.votes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.votes" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <a class="reference internal" href="#gerrychain.updaters.election.ElectionResults.counts" title="gerrychain.updaters.election.ElectionResults.counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">counts()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.wins">
<code class="sig-name descname">wins</code><span class="sig-paren">(</span><em class="sig-param">party</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.wins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.wins" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <a class="reference internal" href="#gerrychain.updaters.election.ElectionResults.seats" title="gerrychain.updaters.election.ElectionResults.seats"><code class="xref py py-meth docutils literal notranslate"><span class="pre">seats()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gerrychain.updaters.election.ElectionResults.won">
<code class="sig-name descname">won</code><span class="sig-paren">(</span><em class="sig-param">party</em>, <em class="sig-param">race</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionResults.won"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionResults.won" title="Permalink to this definition">¶</a></dt>
<dd><p>Answers “Did <code class="docutils literal notranslate"><span class="pre">party</span></code> win the race in part <code class="docutils literal notranslate"><span class="pre">race</span></code>?” with <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gerrychain.updaters.election.ElectionUpdater">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.updaters.election.</code><code class="sig-name descname">ElectionUpdater</code><span class="sig-paren">(</span><em class="sig-param">election</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/updaters/election.html#ElectionUpdater"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.updaters.election.ElectionUpdater" title="Permalink to this definition">¶</a></dt>
<dd><p>The updater for computing the election results in each part of the partition after
each step in the Markov chain. The actual results are returned to the user as
an <a class="reference internal" href="#gerrychain.updaters.election.ElectionResults" title="gerrychain.updaters.election.ElectionResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElectionResults</span></code></a> instance.</p>
</dd></dl>

</div>
<div class="section" id="grids">
<h2><a class="toc-backref" href="#id10">Grids</a><a class="headerlink" href="#grids" title="Permalink to this headline">¶</a></h2>
<p>To make it easier to play around with GerryChain, we have provided a <a class="reference internal" href="#gerrychain.grid.Grid" title="gerrychain.grid.Grid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grid</span></code></a>
class representing a partition of a grid graph. This is especially useful if you want to start experimenting
but do not yet have a clean set of data and geometries to build your graph from.</p>
<dl class="class">
<dt id="gerrychain.grid.Grid">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.grid.</code><code class="sig-name descname">Grid</code><span class="sig-paren">(</span><em class="sig-param">dimensions=None</em>, <em class="sig-param">with_diagonals=False</em>, <em class="sig-param">assignment=None</em>, <em class="sig-param">updaters=None</em>, <em class="sig-param">parent=None</em>, <em class="sig-param">flips=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/grid.html#Grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.grid.Grid" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#gerrychain.grid.Grid" title="gerrychain.grid.Grid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grid</span></code></a> class represents a grid partitioned into districts.
It is useful for running little experiments with GerryChain without needing to do
any data processing or cleaning to get started.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>The nodes of <code class="docutils literal notranslate"><span class="pre">grid.graph</span></code> are labelled by tuples <code class="docutils literal notranslate"><span class="pre">(i,j)</span></code>, for <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">i</span> <span class="pre">&lt;=</span> <span class="pre">10</span></code>
and <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">j</span> <span class="pre">&lt;=</span> <span class="pre">10</span></code>. Each node has an <code class="docutils literal notranslate"><span class="pre">area</span></code> of 1 and each edge has <code class="docutils literal notranslate"><span class="pre">shared_perim</span></code> 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimensions</strong> – tuple (m,n) of the desired dimensions of the grid.</p></li>
<li><p><strong>with_diagonals</strong> – (optional, defaults to False) whether to include diagonals
as edges of the graph (i.e., whether to use ‘queen’ adjacency rather than
‘rook’ adjacency).</p></li>
<li><p><strong>assignment</strong> – (optional) dict matching nodes to their districts. If not
provided, partitions the grid into 4 quarters of roughly equal size.</p></li>
<li><p><strong>updaters</strong> – (optional) dict matching names of attributes of the Partition
to functions that compute their values. If not provided, the Grid
configures the cut_edges updater for convenience.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gerrychain.grid.Grid.as_list_of_lists">
<code class="sig-name descname">as_list_of_lists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/grid.html#Grid.as_list_of_lists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.grid.Grid.as_list_of_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the grid as a list of lists (like a matrix), where the (i,j)th
entry is the assigned district of the node in position (i,j) on the
grid.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="spanning-tree-methods">
<h2><a class="toc-backref" href="#id11">Spanning tree methods</a><a class="headerlink" href="#spanning-tree-methods" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#gerrychain.proposals.recom" title="gerrychain.proposals.recom"><code class="xref py py-func docutils literal notranslate"><span class="pre">recom()</span></code></a> proposal function operates on <a class="reference external" href="https://en.wikipedia.org/wiki/Spanning_tree">spanning trees</a> of the
adjacency graph in order to generate new contiguous districting plans with balanced population.</p>
<p>The <a class="reference internal" href="#module-gerrychain.tree" title="gerrychain.tree"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gerrychain.tree</span></code></a> submodule exposes some helpful functions for partitioning graphs
using spanning trees methods. These may be used to implement proposal functions or to generate
initial plans for running Markov chains, as described in MGGG’s <a class="reference external" href="https://mggg.org/VA-report.pdf">2018 Virginia House of Delegates</a>
report.</p>
<span class="target" id="module-gerrychain.tree"></span><dl class="exception">
<dt id="gerrychain.tree.BalanceError">
<em class="property">exception </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">BalanceError</code><a class="reference internal" href="_modules/gerrychain/tree.html#BalanceError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.BalanceError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a balanced cut cannot be found.</p>
</dd></dl>

<dl class="class">
<dt id="gerrychain.tree.Cut">
<em class="property">class </em><code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">Cut</code><span class="sig-paren">(</span><em class="sig-param">edge</em>, <em class="sig-param">subset</em><span class="sig-paren">)</span><a class="headerlink" href="#gerrychain.tree.Cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of Cut(edge, subset)</p>
<dl class="attribute">
<dt id="gerrychain.tree.Cut.edge">
<code class="sig-name descname">edge</code><a class="headerlink" href="#gerrychain.tree.Cut.edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="gerrychain.tree.Cut.subset">
<code class="sig-name descname">subset</code><a class="headerlink" href="#gerrychain.tree.Cut.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.bipartition_tree">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">bipartition_tree</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">spanning_tree=None</em>, <em class="sig-param">spanning_tree_fn=&lt;function random_spanning_tree&gt;</em>, <em class="sig-param">balance_edge_fn=&lt;function find_balanced_edge_cuts_memoization&gt;</em>, <em class="sig-param">choice=&lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em>, <em class="sig-param">max_attempts=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#bipartition_tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.bipartition_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>This function finds a balanced 2 partition of a graph by drawing a
spanning tree and finding an edge to cut that leaves at most an epsilon
imbalance between the populations of the parts. If a root fails, new roots
are tried until node_repeats in which case a new tree is drawn.</p>
<p>Builds up a connected subgraph with a connected complement whose population
is <code class="docutils literal notranslate"><span class="pre">epsilon</span> <span class="pre">*</span> <span class="pre">pop_target</span></code> away from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>.</p>
<p>Returns a subset of nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code> (whose induced subgraph is connected).
The other part of the partition is the complement of this subset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The graph to partition</p></li>
<li><p><strong>pop_col</strong> – The node attribute holding the population of each node</p></li>
<li><p><strong>pop_target</strong> – The target population for the returned subset of nodes</p></li>
<li><p><strong>epsilon</strong> – The allowable deviation from  <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> (as a percentage of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) for the subgraph’s population</p></li>
<li><p><strong>node_repeats</strong> – A parameter for the algorithm: how many different choices
of root to use before drawing a new spanning tree.</p></li>
<li><p><strong>spanning_tree</strong> – The spanning tree for the algorithm to use (used when the
algorithm chooses a new root and for testing)</p></li>
<li><p><strong>spanning_tree_fn</strong> – The random spanning tree algorithm to use if a spanning
tree is not provided</p></li>
<li><p><strong>choice</strong> – <code class="xref py py-func docutils literal notranslate"><span class="pre">random.choice()</span></code>. Can be substituted for testing.</p></li>
<li><p><strong>max_atempts</strong> – The max number of attempts that should be made to bipartition.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.bipartition_tree_random">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">bipartition_tree_random</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">repeat_until_valid=True</em>, <em class="sig-param">spanning_tree=None</em>, <em class="sig-param">spanning_tree_fn=&lt;function random_spanning_tree&gt;</em>, <em class="sig-param">balance_edge_fn=&lt;function find_balanced_edge_cuts_memoization&gt;</em>, <em class="sig-param">choice=&lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#bipartition_tree_random"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.bipartition_tree_random" title="Permalink to this definition">¶</a></dt>
<dd><p>This is like <a class="reference internal" href="#gerrychain.tree.bipartition_tree" title="gerrychain.tree.bipartition_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></a> except it chooses a random balanced
cut, rather than the first cut it finds.</p>
<p>This function finds a balanced 2 partition of a graph by drawing a
spanning tree and finding an edge to cut that leaves at most an epsilon
imbalance between the populations of the parts. If a root fails, new roots
are tried until node_repeats in which case a new tree is drawn.</p>
<p>Builds up a connected subgraph with a connected complement whose population
is <code class="docutils literal notranslate"><span class="pre">epsilon</span> <span class="pre">*</span> <span class="pre">pop_target</span></code> away from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>.</p>
<p>Returns a subset of nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code> (whose induced subgraph is connected).
The other part of the partition is the complement of this subset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The graph to partition</p></li>
<li><p><strong>pop_col</strong> – The node attribute holding the population of each node</p></li>
<li><p><strong>pop_target</strong> – The target population for the returned subset of nodes</p></li>
<li><p><strong>epsilon</strong> – The allowable deviation from  <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> (as a percentage of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) for the subgraph’s population</p></li>
<li><p><strong>node_repeats</strong> – A parameter for the algorithm: how many different choices
of root to use before drawing a new spanning tree.</p></li>
<li><p><strong>repeat_until_valid</strong> – Determines whether to keep drawing spanning trees
until a tree with a balanced cut is found. If <cite>True</cite>, a set of nodes will
always be returned; if <cite>False</cite>, <cite>None</cite> will be returned if a valid spanning
tree is not found on the first try.</p></li>
<li><p><strong>spanning_tree</strong> – The spanning tree for the algorithm to use (used when the
algorithm chooses a new root and for testing)</p></li>
<li><p><strong>spanning_tree_fn</strong> – The random spanning tree algorithm to use if a spanning
tree is not provided</p></li>
<li><p><strong>balance_edge_fn</strong> – The algorithm used to find balanced cut edges</p></li>
<li><p><strong>choice</strong> – <code class="xref py py-func docutils literal notranslate"><span class="pre">random.choice()</span></code>. Can be substituted for testing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.get_max_prime_factor_less_than">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">get_max_prime_factor_less_than</code><span class="sig-paren">(</span><em class="sig-param">n</em>, <em class="sig-param">ceil</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#get_max_prime_factor_less_than"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.get_max_prime_factor_less_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for recursive_seed_part. Returns the largest prime factor of <code class="docutils literal notranslate"><span class="pre">n</span></code> less than
<code class="docutils literal notranslate"><span class="pre">ceil</span></code>, or None if all are greater than ceil.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.get_seed_chunks">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">get_seed_chunks</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">num_chunks</em>, <em class="sig-param">num_dists</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">method=functools.partial(&lt;function bipartition_tree_random&gt;</em>, <em class="sig-param">max_attempts=10000)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#get_seed_chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.get_seed_chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for recursive_seed_part. Partitions the graph into <code class="docutils literal notranslate"><span class="pre">num_chunks</span></code> chunks,
balanced within new_epsilon &lt;= <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> of a balanced target population.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The graph</p></li>
<li><p><strong>parts</strong> – Iterable of part labels (like <code class="docutils literal notranslate"><span class="pre">[0,1,2]</span></code> or <code class="docutils literal notranslate"><span class="pre">range(4)</span></code></p></li>
<li><p><strong>pop_target</strong> – target population of the districts (not of the chunks)</p></li>
<li><p><strong>pop_col</strong> – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>node_repeats</strong> – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.random_spanning_tree">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">random_spanning_tree</code><span class="sig-paren">(</span><em class="sig-param">graph</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#random_spanning_tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.random_spanning_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a spanning tree chosen by Kruskal’s method using random weights.
:param graph: FrozenGraph</p>
<p>Important Note:
The key is specifically labelled “random_weight” instead of the previously
used “weight”. Turns out that networkx uses the “weight” keyword for other
operations, like when computing the laplacian or the adjacency matrix.
This meant that the laplacian would change for the graph step to step,
something that we do not intend!!</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.recursive_seed_part">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">recursive_seed_part</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">parts</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">method=functools.partial(&lt;function bipartition_tree&gt;</em>, <em class="sig-param">max_attempts=10000)</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">n=None</em>, <em class="sig-param">ceil=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#recursive_seed_part"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.recursive_seed_part" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a partition with <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> districts balanced within <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code> by recursively splitting graph using recursive_seed_part_inner.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The graph</p></li>
<li><p><strong>parts</strong> – Iterable of part labels (like <code class="docutils literal notranslate"><span class="pre">[0,1,2]</span></code> or <code class="docutils literal notranslate"><span class="pre">range(4)</span></code></p></li>
<li><p><strong>pop_target</strong> – Target population for each part of the partition</p></li>
<li><p><strong>pop_col</strong> – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>method</strong> – Function used to find balanced partitions at the 2-district level</p></li>
<li><p><strong>node_repeats</strong> – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.</p></li>
<li><p><strong>n</strong> – Either a positive integer (greater than 1) or None. If n is a positive integer,</p></li>
</ul>
</dd>
</dl>
<p>this function will recursively create a seed plan by either biting off districts from graph
or dividing graph into n chunks and recursing into each of these. If n is None, this
function prime factors <code class="docutils literal notranslate"><span class="pre">num_dists``=n_1*n_2*...*n_k</span> <span class="pre">(n_1</span> <span class="pre">&gt;</span> <span class="pre">n_2</span> <span class="pre">&gt;</span> <span class="pre">...</span> <span class="pre">n_k)</span> <span class="pre">and</span> <span class="pre">recursively</span>
<span class="pre">partitions</span> <span class="pre">graph</span> <span class="pre">into</span> <span class="pre">n_1</span> <span class="pre">chunks.</span>
<span class="pre">:param</span> <span class="pre">ceil:</span> <span class="pre">Either</span> <span class="pre">a</span> <span class="pre">positive</span> <span class="pre">integer</span> <span class="pre">(at</span> <span class="pre">least</span> <span class="pre">2)</span> <span class="pre">or</span> <span class="pre">None.</span> <span class="pre">Relevant</span> <span class="pre">only</span> <span class="pre">if</span> <span class="pre">n</span> <span class="pre">is</span> <span class="pre">None.</span> <span class="pre">If</span>
<span class="pre">``ceil</span></code> is a positive integer then finds the largest factor of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> less than or
equal to <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, and recursively splits graph into that number of chunks, or bites off a
district if that number is 1.
:return: New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.
:rtype: dict</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.recursive_seed_part_inner">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">recursive_seed_part_inner</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">num_dists</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">method=functools.partial(&lt;function bipartition_tree&gt;</em>, <em class="sig-param">max_attempts=10000)</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">n=None</em>, <em class="sig-param">ceil=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#recursive_seed_part_inner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.recursive_seed_part_inner" title="Permalink to this definition">¶</a></dt>
<dd><p>Inner function for recursive_seed_part.
Returns a partition with <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> districts balanced within <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> of
<code class="docutils literal notranslate"><span class="pre">pop_target</span></code>.
Splits graph into num_chunks chunks, and then recursively splits each chunk into
<code class="docutils literal notranslate"><span class="pre">num_dists</span></code>/num_chunks chunks.
The number num_chunks of chunks is chosen based on <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">ceil</span></code> as follows:</p>
<blockquote>
<div><p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is None, and <code class="docutils literal notranslate"><span class="pre">ceil</span></code> is None, num_chunks is the largest prime factor
of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code>.
If <code class="docutils literal notranslate"><span class="pre">n</span></code> is None and <code class="docutils literal notranslate"><span class="pre">ceil</span></code> is an integer at least 2, then num_chunks is the
largest prime factor of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> that is less than <code class="docutils literal notranslate"><span class="pre">ceil</span></code>
If <code class="docutils literal notranslate"><span class="pre">n</span></code> is a positive integer, num_chunks equals n.</p>
</div></blockquote>
<p>Finally, if the number of chunks as chosen above does not divide <code class="docutils literal notranslate"><span class="pre">num_dists</span></code>, then
this function bites off a single district from the graph and recursively partitions
the remaining graph into <code class="docutils literal notranslate"><span class="pre">num_dists</span></code>-1 districts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The graph</p></li>
<li><p><strong>num_dists</strong> – number of districts to partition the graph into</p></li>
<li><p><strong>pop_target</strong> – Target population for each part of the partition</p></li>
<li><p><strong>pop_col</strong> – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>method</strong> – Function used to find balanced partitions at the 2-district level</p></li>
<li><p><strong>node_repeats</strong> – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.</p></li>
<li><p><strong>n</strong> – Either a positive integer (greater than 1) or None. If n is a positive integer,
this function will recursively create a seed plan by either biting off districts from
graph or dividing graph into n chunks and recursing into each of these. If n is None,
this function prime factors <a href="#id1"><span class="problematic" id="id2">``</span></a>num_dists``=n_1*n_2*…*n_k (n_1 &gt; n_2 &gt; … n_k) and
recursively partitions graph into n_1 chunks.</p></li>
<li><p><strong>ceil</strong> – Either a positive integer (at least 2) or None. Relevant only if n is None.
If <code class="docutils literal notranslate"><span class="pre">ceil</span></code> is a positive integer then finds the largest factor of <code class="docutils literal notranslate"><span class="pre">num_dists</span></code> less
than or equal to <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, and recursively splits graph into that number of chunks, or
bites off a district if that number is 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List of lists, each list is a district</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.recursive_tree_part">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">recursive_tree_part</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">parts</em>, <em class="sig-param">pop_target</em>, <em class="sig-param">pop_col</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">node_repeats=1</em>, <em class="sig-param">method=functools.partial(&lt;function bipartition_tree&gt;</em>, <em class="sig-param">max_attempts=10000)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#recursive_tree_part"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.recursive_tree_part" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses <a class="reference internal" href="#gerrychain.tree.bipartition_tree" title="gerrychain.tree.bipartition_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code></a> recursively to partition a tree into
<code class="docutils literal notranslate"><span class="pre">len(parts)</span></code> parts of population <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> (within <code class="docutils literal notranslate"><span class="pre">epsilon</span></code>). Can be used to
generate initial seed plans or to implement ReCom-like “merge walk” proposals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – The graph</p></li>
<li><p><strong>parts</strong> – Iterable of part labels (like <code class="docutils literal notranslate"><span class="pre">[0,1,2]</span></code> or <code class="docutils literal notranslate"><span class="pre">range(4)</span></code></p></li>
<li><p><strong>pop_target</strong> – Target population for each part of the partition</p></li>
<li><p><strong>pop_col</strong> – Node attribute key holding population data</p></li>
<li><p><strong>epsilon</strong> – How far (as a percentage of <code class="docutils literal notranslate"><span class="pre">pop_target</span></code>) from <code class="docutils literal notranslate"><span class="pre">pop_target</span></code> the parts
of the partition can be</p></li>
<li><p><strong>node_repeats</strong> – Parameter for <code class="xref py py-func docutils literal notranslate"><span class="pre">bipartition_tree()</span></code> to use.</p></li>
<li><p><strong>method</strong> – The partition method to use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New assignments for the nodes of <code class="docutils literal notranslate"><span class="pre">graph</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gerrychain.tree.uniform_spanning_tree">
<code class="sig-prename descclassname">gerrychain.tree.</code><code class="sig-name descname">uniform_spanning_tree</code><span class="sig-paren">(</span><em class="sig-param">graph</em>, <em class="sig-param">choice=&lt;bound method Random.choice of &lt;random.Random object&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/tree.html#uniform_spanning_tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.tree.uniform_spanning_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a spanning tree chosen uniformly from the space of all
spanning trees of the graph.
:param graph: Networkx Graph
:param choice: <code class="xref py py-func docutils literal notranslate"><span class="pre">random.choice()</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-gerrychain.metrics">
<span id="metrics"></span><h2><a class="toc-backref" href="#id12">Metrics</a><a class="headerlink" href="#module-gerrychain.metrics" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="gerrychain.metrics.mean_median">
<code class="sig-prename descclassname">gerrychain.metrics.</code><code class="sig-name descname">mean_median</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#mean_median"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.metrics.mean_median" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the Mean-Median score for the given ElectionResults.
A positive value indicates an advantage for the first party listed
in the Election’s parties_to_columns dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.metrics.partisan_bias">
<code class="sig-prename descclassname">gerrychain.metrics.</code><code class="sig-name descname">partisan_bias</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#partisan_bias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.metrics.partisan_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the partisan bias for the given ElectionResults.
The partisan bias is defined as the number of districts with above-mean
vote share by the first party divided by the total number of districts,
minus 1/2.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.metrics.partisan_gini">
<code class="sig-prename descclassname">gerrychain.metrics.</code><code class="sig-name descname">partisan_gini</code><span class="sig-paren">(</span><em class="sig-param">election_results</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#partisan_gini"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.metrics.partisan_gini" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the partisan Gini score for the given ElectionResults.
The partisan Gini score is defined as the area between the seats-votes
curve and its reflection about (.5, .5).</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.metrics.efficiency_gap">
<code class="sig-prename descclassname">gerrychain.metrics.</code><code class="sig-name descname">efficiency_gap</code><span class="sig-paren">(</span><em class="sig-param">results</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#efficiency_gap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.metrics.efficiency_gap" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the efficiency gap for the given ElectionResults.
A positive value indicates an advantage for the first party listed
in the Election’s parties_to_columns dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.metrics.polsby_popper">
<code class="sig-prename descclassname">gerrychain.metrics.</code><code class="sig-name descname">polsby_popper</code><span class="sig-paren">(</span><em class="sig-param">partition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/metrics/compactness.html#polsby_popper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.metrics.polsby_popper" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes Polsby-Popper compactness scores for each district in the partition.</p>
</dd></dl>

<dl class="function">
<dt id="gerrychain.metrics.wasted_votes">
<code class="sig-prename descclassname">gerrychain.metrics.</code><code class="sig-name descname">wasted_votes</code><span class="sig-paren">(</span><em class="sig-param">party1_votes</em>, <em class="sig-param">party2_votes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gerrychain/metrics/partisan.html#wasted_votes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gerrychain.metrics.wasted_votes" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the wasted votes for each party in the given race.
:party1_votes: the number of votes party1 received in the race
:party2_votes: the number of votes party2 received in the race</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user/adjacency.html" class="btn btn-neutral float-left" title="Handling Adjacencies" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="topics/reproducibility.html" class="btn btn-neutral float-right" title="Reproducibility" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Metric Geometry and Gerrymandering Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>